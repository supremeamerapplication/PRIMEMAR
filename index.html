<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>PrimeMar Pro - Complete Social Platform</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/toastify-js/src/toastify.min.css">
    <script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"></script>
    <script src="https://cdn.jsdelivr.net/npm/toastify-js"></script>
    <script src="https://cdn.jsdelivr.net/npm/markdown-it@13/dist/markdown-it.min.js"></script>
    <style>
        :root {
            --primary-color: #ff6b35;
            --secondary-color: #f7c948;
            --accent-color: #ff3864;
            --success-color: #2ecc71;
            --info-color: #3498db;
            --warning-color: #f39c12;
            --dark-bg: #0f0f23;
            --darker-bg: #0a0a1a;
            --light-bg: #f8f9fa;
            --lighter-bg: #ffffff;
            --card-bg-dark: rgba(25, 25, 40, 0.95);
            --card-bg-light: rgba(255, 255, 255, 0.95);
            --text-dark: #ffffff;
            --text-light: #1a1a2e;
            --shadow-color: rgba(0, 0, 0, 0.3);
            --gradient-primary: linear-gradient(135deg, var(--primary-color), var(--accent-color));
            --gradient-secondary: linear-gradient(135deg, var(--secondary-color), var(--primary-color));
            --gradient-dark: linear-gradient(135deg, var(--dark-bg), var(--darker-bg));
            --gradient-light: linear-gradient(135deg, var(--light-bg), var(--lighter-bg));
            --border-radius-sm: 10px;
            --border-radius-md: 15px;
            --border-radius-lg: 20px;
            --border-radius-xl: 25px;
            --transition-fast: 0.2s ease;
            --transition-normal: 0.3s ease;
            --transition-slow: 0.5s ease;
            --header-height: 70px;
            --nav-height: 65px;
            --z-header: 1000;
            --z-modal: 2000;
            --z-toast: 3000;
            --z-story: 4000;
        }

        /* Base styles remain the same */
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Segoe UI', system-ui, -apple-system, sans-serif;
            background: var(--gradient-dark);
            color: var(--text-dark);
            min-height: 100vh;
            padding-bottom: var(--nav-height);
            transition: all var(--transition-normal);
            overflow-x: hidden;
        }

        body.light-mode {
            background: var(--gradient-light);
            color: var(--text-light);
        }

        /* ==================== ADDED FEATURES FROM FIRST CODE ==================== */

        /* Animated Background */
        .animated-bg {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: linear-gradient(-45deg, #0f0f23, #1a1a2e, #16213e, #0f3460);
            background-size: 400% 400%;
            animation: gradientBG 15s ease infinite;
            z-index: -1;
        }

        @keyframes gradientBG {
            0% { background-position: 0% 50%; }
            50% { background-position: 100% 50%; }
            100% { background-position: 0% 50%; }
        }

        /* Story System */
        .stories-carousel {
            display: flex;
            gap: 15px;
            overflow-x: auto;
            padding: 15px 0;
            scrollbar-width: none;
        }

        .stories-carousel::-webkit-scrollbar {
            display: none;
        }

        .story-item {
            position: relative;
            min-width: 80px;
            height: 80px;
            border-radius: 50%;
            background: var(--gradient-primary);
            padding: 3px;
            cursor: pointer;
        }

        .story-content {
            width: 100%;
            height: 100%;
            border-radius: 50%;
            overflow: hidden;
            background: var(--dark-bg);
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 24px;
            color: white;
        }

        .story-username {
            position: absolute;
            bottom: -20px;
            left: 50%;
            transform: translateX(-50%);
            font-size: 12px;
            white-space: nowrap;
        }

        /* Advanced Search */
        .search-advanced {
            position: relative;
            flex: 1;
            max-width: 500px;
        }

        .search-input-advanced {
            width: 100%;
            padding: 12px 20px;
            padding-right: 50px;
            border-radius: 25px;
            border: 2px solid rgba(255, 255, 255, 0.1);
            background: rgba(255, 255, 255, 0.1);
            color: white;
            font-size: 14px;
            transition: all var(--transition-normal);
        }

        .search-input-advanced:focus {
            outline: none;
            border-color: var(--primary-color);
            background: rgba(255, 255, 255, 0.15);
        }

        .search-results {
            position: absolute;
            top: 100%;
            left: 0;
            right: 0;
            background: var(--card-bg-dark);
            border-radius: var(--border-radius-md);
            margin-top: 10px;
            padding: 15px;
            box-shadow: 0 10px 30px var(--shadow-color);
            z-index: var(--z-modal);
            max-height: 400px;
            overflow-y: auto;
            border: 1px solid rgba(255, 255, 255, 0.1);
        }

        /* Glass Effect */
        .glass-effect {
            background: rgba(255, 255, 255, 0.1);
            backdrop-filter: blur(10px);
            border: 1px solid rgba(255, 255, 255, 0.1);
        }

        /* Advanced Post Composer */
        .post-composer-advanced {
            background: var(--card-bg-dark);
            padding: 25px;
            border-radius: var(--border-radius-lg);
            margin-bottom: 25px;
            border: 1px solid rgba(255, 255, 255, 0.1);
        }

        .upload-zone {
            border: 2px dashed rgba(255, 255, 255, 0.2);
            border-radius: var(--border-radius-md);
            padding: 40px 20px;
            text-align: center;
            transition: all var(--transition-normal);
            margin: 15px 0;
        }

        .upload-zone.dragover {
            border-color: var(--primary-color);
            background: rgba(255, 107, 53, 0.1);
        }

        .image-gallery {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(150px, 1fr));
            gap: 10px;
            margin: 15px 0;
        }

        .image-preview {
            position: relative;
            border-radius: var(--border-radius-sm);
            overflow: hidden;
        }

        .image-preview img {
            width: 100%;
            height: 150px;
            object-fit: cover;
        }

        /* Poll System */
        .poll-editor {
            background: rgba(255, 255, 255, 0.05);
            border-radius: var(--border-radius-md);
            padding: 20px;
            margin: 15px 0;
        }

        .poll-option-editor {
            display: flex;
            align-items: center;
            gap: 10px;
            margin-bottom: 10px;
        }

        .poll-option-input {
            flex: 1;
            padding: 10px 15px;
            border: 1px solid rgba(255, 255, 255, 0.1);
            border-radius: var(--border-radius-sm);
            background: rgba(255, 255, 255, 0.05);
            color: white;
        }

        /* Emoji Picker */
        .emoji-picker-complete {
            display: grid;
            grid-template-columns: repeat(8, 1fr);
            gap: 5px;
            background: var(--card-bg-dark);
            border-radius: var(--border-radius-md);
            padding: 15px;
            border: 1px solid rgba(255, 255, 255, 0.1);
            margin-top: 10px;
            max-height: 200px;
            overflow-y: auto;
        }

        .emoji-picker-complete span {
            padding: 5px;
            text-align: center;
            cursor: pointer;
            border-radius: 5px;
            transition: all var(--transition-fast);
        }

        .emoji-picker-complete span:hover {
            background: rgba(255, 255, 255, 0.1);
            transform: scale(1.2);
        }

        /* Advanced Chat System */
        .chat-advanced {
            display: flex;
            height: calc(100vh - 180px);
            background: var(--card-bg-dark);
            border-radius: var(--border-radius-lg);
            overflow: hidden;
            border: 1px solid rgba(255, 255, 255, 0.1);
        }

        .messages-list {
            width: 300px;
            border-right: 1px solid rgba(255, 255, 255, 0.1);
            overflow-y: auto;
        }

        .chat-view {
            flex: 1;
            display: flex;
            flex-direction: column;
        }

        .chat-messages {
            flex: 1;
            padding: 20px;
            overflow-y: auto;
        }

        .chat-input-container {
            display: flex;
            gap: 10px;
            padding: 15px;
            border-top: 1px solid rgba(255, 255, 255, 0.1);
            background: rgba(255, 255, 255, 0.05);
        }

        .chat-input {
            flex: 1;
            padding: 12px 20px;
            border: 1px solid rgba(255, 255, 255, 0.1);
            border-radius: 25px;
            background: rgba(255, 255, 255, 0.1);
            color: white;
        }

        .voice-message {
            width: 40px;
            height: 40px;
            border-radius: 50%;
            background: var(--gradient-primary);
            border: none;
            color: white;
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        /* Voice Recording Waveform */
        .voice-wave {
            display: flex;
            align-items: center;
            gap: 2px;
            height: 20px;
        }

        .voice-bar {
            width: 3px;
            height: 100%;
            background: white;
            border-radius: 2px;
            animation: voiceWave 1s infinite;
        }

        .voice-bar:nth-child(2) { animation-delay: 0.1s; }
        .voice-bar:nth-child(3) { animation-delay: 0.2s; }
        .voice-bar:nth-child(4) { animation-delay: 0.3s; }
        .voice-bar:nth-child(5) { animation-delay: 0.4s; }

        @keyframes voiceWave {
            0%, 100% { height: 20%; }
            50% { height: 100%; }
        }

        /* Music Player */
        .music-player-complete {
            position: fixed;
            bottom: 80px;
            left: 20px;
            right: 20px;
            background: var(--card-bg-dark);
            border-radius: var(--border-radius-lg);
            padding: 15px;
            display: flex;
            align-items: center;
            gap: 15px;
            box-shadow: 0 10px 30px var(--shadow-color);
            z-index: 100;
            border: 1px solid rgba(255, 255, 255, 0.1);
        }

        .music-cover {
            width: 50px;
            height: 50px;
            border-radius: 10px;
            object-fit: cover;
        }

        .music-info {
            flex: 1;
        }

        .music-controls {
            display: flex;
            align-items: center;
            gap: 15px;
        }

        .music-control {
            background: none;
            border: none;
            color: var(--primary-color);
            font-size: 20px;
            cursor: pointer;
            padding: 8px;
            border-radius: 50%;
            transition: all var(--transition-normal);
        }

        .music-control:hover {
            background: rgba(255, 107, 53, 0.1);
        }

        /* Quick Actions Menu */
        .quick-actions {
            position: fixed;
            bottom: 130px;
            right: 20px;
            display: flex;
            flex-direction: column;
            gap: 10px;
            z-index: 90;
            opacity: 0;
            transform: translateY(20px);
            transition: all var(--transition-normal);
        }

        .quick-actions.show {
            opacity: 1;
            transform: translateY(0);
        }

        .quick-action-btn {
            width: 50px;
            height: 50px;
            border-radius: 50%;
            background: var(--gradient-primary);
            border: none;
            color: white;
            font-size: 18px;
            cursor: pointer;
            box-shadow: 0 5px 15px rgba(255, 107, 53, 0.3);
            transition: all var(--transition-normal);
        }

        .quick-action-btn:hover {
            transform: scale(1.1);
            box-shadow: 0 8px 20px rgba(255, 107, 53, 0.4);
        }

        /* FAB */
        .fab {
            position: fixed;
            bottom: 20px;
            right: 20px;
            width: 60px;
            height: 60px;
            border-radius: 50%;
            background: var(--gradient-primary);
            border: none;
            color: white;
            font-size: 24px;
            cursor: pointer;
            box-shadow: 0 10px 30px rgba(255, 107, 53, 0.3);
            z-index: 100;
            transition: all var(--transition-normal);
        }

        .fab:hover {
            transform: scale(1.1) rotate(90deg);
            box-shadow: 0 15px 40px rgba(255, 107, 53, 0.4);
        }

        /* News Ticker */
        .news-ticker {
            background: var(--card-bg-dark);
            border-radius: var(--border-radius-md);
            padding: 15px;
            margin-bottom: 20px;
            overflow: hidden;
            border: 1px solid rgba(255, 255, 255, 0.1);
        }

        .news-content {
            display: flex;
            animation: ticker 30s linear infinite;
            white-space: nowrap;
        }

        @keyframes ticker {
            0% { transform: translateX(100%); }
            100% { transform: translateX(-100%); }
        }

        /* Filter Bar */
        .filter-bar {
            display: flex;
            gap: 10px;
            overflow-x: auto;
            padding: 15px 0;
            scrollbar-width: none;
        }

        .filter-bar::-webkit-scrollbar {
            display: none;
        }

        .filter-chip {
            padding: 8px 16px;
            background: rgba(255, 255, 255, 0.1);
            border-radius: 20px;
            font-size: 14px;
            white-space: nowrap;
            cursor: pointer;
            transition: all var(--transition-normal);
        }

        .filter-chip.active {
            background: var(--gradient-primary);
            color: white;
        }

        /* Analytics Dashboard */
        .analytics-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 15px;
            margin: 20px 0;
        }

        .analytics-card {
            background: var(--card-bg-dark);
            border-radius: var(--border-radius-md);
            padding: 20px;
            border: 1px solid rgba(255, 255, 255, 0.1);
        }

        .stat-value {
            font-size: 2em;
            font-weight: bold;
            margin-bottom: 5px;
        }

        .stat-label {
            font-size: 14px;
            color: var(--secondary-color);
        }

        /* Reaction System */
        .reaction-container {
            display: flex;
            gap: 5px;
            background: var(--card-bg-dark);
            padding: 8px;
            border-radius: 25px;
            box-shadow: 0 5px 15px var(--shadow-color);
            position: absolute;
            bottom: 40px;
            left: 50%;
            transform: translateX(-50%);
            opacity: 0;
            pointer-events: none;
            transition: all var(--transition-normal);
            z-index: 10;
        }

        .reaction-container.active {
            opacity: 1;
            pointer-events: all;
            bottom: 50px;
        }

        .reaction-emoji {
            padding: 5px;
            cursor: pointer;
            font-size: 20px;
            transition: all var(--transition-fast);
        }

        .reaction-emoji:hover {
            transform: scale(1.3);
        }

        /* Markdown Content */
        .markdown-content {
            line-height: 1.6;
        }

        .markdown-content h1 { font-size: 1.8em; margin: 1em 0; }
        .markdown-content h2 { font-size: 1.5em; margin: 1em 0; }
        .markdown-content h3 { font-size: 1.3em; margin: 1em 0; }
        .markdown-content p { margin: 1em 0; }
        .markdown-content ul, .markdown-content ol { padding-left: 2em; margin: 1em 0; }
        .markdown-content code { background: rgba(255, 255, 255, 0.1); padding: 2px 6px; border-radius: 4px; }
        .markdown-content pre { background: rgba(255, 255, 255, 0.1); padding: 15px; border-radius: 8px; overflow-x: auto; }
        .markdown-content blockquote { border-left: 4px solid var(--primary-color); padding-left: 1em; margin: 1em 0; opacity: 0.8; }

        /* Connection Status */
        .connection-status {
            position: fixed;
            top: 80px;
            right: 20px;
            background: var(--success-color);
            color: white;
            padding: 8px 15px;
            border-radius: 20px;
            font-size: 12px;
            font-weight: bold;
            z-index: var(--z-toast);
            display: flex;
            align-items: center;
            gap: 5px;
            box-shadow: 0 5px 15px rgba(46, 204, 113, 0.3);
            opacity: 0;
            transform: translateY(-20px);
            transition: all var(--transition-normal);
        }

        .connection-status.show {
            opacity: 1;
            transform: translateY(0);
        }

        .connection-status.offline {
            background: var(--accent-color);
        }

        /* Offline Banner */
        .offline-banner {
            position: fixed;
            top: 70px;
            left: 0;
            right: 0;
            background: var(--accent-color);
            color: white;
            padding: 12px;
            text-align: center;
            z-index: var(--z-toast);
            transform: translateY(-100%);
            transition: transform var(--transition-normal);
        }

        .offline-banner.active {
            transform: translateY(0);
        }

        /* Error Boundary */
        .error-boundary {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: var(--gradient-dark);
            display: flex;
            align-items: center;
            justify-content: center;
            z-index: var(--z-modal);
            padding: 20px;
        }

        .error-content {
            background: var(--card-bg-dark);
            padding: 40px;
            border-radius: var(--border-radius-lg);
            text-align: center;
            max-width: 500px;
            border: 2px solid var(--accent-color);
        }

        /* Memory Monitor */
        .memory-monitor {
            position: fixed;
            bottom: 80px;
            left: 20px;
            background: rgba(0, 0, 0, 0.7);
            color: var(--success-color);
            padding: 5px 10px;
            border-radius: var(--border-radius-sm);
            font-size: 11px;
            font-family: monospace;
            z-index: 90;
        }

        /* Confetti Container */
        .confetti-container {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            pointer-events: none;
            z-index: var(--z-toast);
        }

        .confetti {
            position: absolute;
            width: 10px;
            height: 10px;
            border-radius: 50%;
            animation: fall linear forwards;
        }

        @keyframes fall {
            to {
                transform: translateY(100vh) rotate(360deg);
                opacity: 0;
            }
        }

        /* Modal System */
        .modal-complete {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.8);
            backdrop-filter: blur(10px);
            display: flex;
            align-items: center;
            justify-content: center;
            z-index: var(--z-modal);
            padding: 20px;
            opacity: 0;
            animation: modalFadeIn 0.3s ease forwards;
        }

        .modal-complete.d-none {
            display: none;
        }

        @keyframes modalFadeIn {
            to { opacity: 1; }
        }

        .modal-content {
            background: var(--card-bg-dark);
            border-radius: var(--border-radius-lg);
            max-width: 800px;
            width: 100%;
            max-height: 90vh;
            overflow: hidden;
            border: 1px solid rgba(255, 255, 255, 0.1);
        }

        .modal-header {
            padding: 20px;
            border-bottom: 1px solid rgba(255, 255, 255, 0.1);
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .modal-body {
            padding: 20px;
            overflow-y: auto;
            max-height: calc(90vh - 80px);
        }

        .close-btn {
            background: none;
            border: none;
            color: var(--secondary-color);
            font-size: 24px;
            cursor: pointer;
            padding: 5px;
        }

        /* Story Viewer */
        .story-viewer {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.95);
            z-index: var(--z-story);
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .story-content {
            max-width: 90%;
            max-height: 90%;
            border-radius: var(--border-radius-lg);
            overflow: hidden;
        }

        .story-progress-container {
            position: absolute;
            top: 20px;
            left: 20px;
            right: 20px;
            display: flex;
            gap: 5px;
        }

        .story-progress-item {
            flex: 1;
            height: 3px;
            background: rgba(255, 255, 255, 0.3);
            border-radius: 2px;
            overflow: hidden;
        }

        .story-progress-fill {
            height: 100%;
            background: var(--primary-color);
            width: 0%;
            transition: width 0.1s linear;
        }

        .close-story {
            position: absolute;
            top: 20px;
            right: 20px;
            color: white;
            font-size: 30px;
            cursor: pointer;
            padding: 10px;
        }

        /* Typing Indicator */
        .chat-typing-indicator {
            padding: 10px 15px;
            background: rgba(255, 255, 255, 0.1);
            border-radius: 20px;
            display: inline-flex;
            align-items: center;
            gap: 5px;
            font-size: 14px;
            color: var(--secondary-color);
        }

        .typing-dots {
            display: flex;
            gap: 3px;
        }

        .typing-dot {
            width: 6px;
            height: 6px;
            background: var(--primary-color);
            border-radius: 50%;
            animation: typingBounce 1.4s infinite;
        }

        .typing-dot:nth-child(2) { animation-delay: 0.2s; }
        .typing-dot:nth-child(3) { animation-delay: 0.4s; }

        @keyframes typingBounce {
            0%, 60%, 100% { transform: translateY(0); }
            30% { transform: translateY(-5px); }
        }

        /* Live Streaming */
        .live-stream-container {
            width: 100%;
            height: 400px;
            background: #000;
            border-radius: var(--border-radius-lg);
            overflow: hidden;
            position: relative;
        }

        .live-badge {
            position: absolute;
            top: 15px;
            left: 15px;
            background: var(--accent-color);
            color: white;
            padding: 5px 15px;
            border-radius: 20px;
            font-weight: bold;
            animation: pulse 2s infinite;
        }

        .live-viewers {
            position: absolute;
            top: 15px;
            right: 15px;
            background: rgba(0, 0, 0, 0.7);
            color: white;
            padding: 5px 15px;
            border-radius: 20px;
            font-size: 14px;
        }

        /* Voice Recorder */
        .voice-recorder-modal .modal-content {
            max-width: 400px;
        }

        .voice-waveform {
            width: 100%;
            height: 100px;
            background: rgba(255, 255, 255, 0.05);
            border-radius: 10px;
            margin: 20px 0;
            position: relative;
            overflow: hidden;
        }

        #recordingTimer {
            font-family: monospace;
            font-size: 2em;
            margin: 20px 0;
        }

        /* Profile Edit Modal */
        .profile-edit-modal .modal-content {
            max-width: 600px;
        }

        .profile-edit-section {
            margin-bottom: 20px;
        }

        .profile-edit-label {
            display: block;
            margin-bottom: 8px;
            font-weight: 600;
            color: var(--primary-color);
        }

        /* Utility Classes */
        .d-none { display: none !important; }
        .d-flex { display: flex !important; }
        .flex-1 { flex: 1; }
        .w-100 { width: 100%; }
        .text-center { text-align: center; }
        .mb-3 { margin-bottom: 15px; }
        .mb-4 { margin-bottom: 20px; }
        .mt-4 { margin-top: 20px; }
        .gap-2 { gap: 10px; }
        .gap-3 { gap: 15px; }
        .gap-4 { gap: 20px; }
        .items-center { align-items: center; }
        .justify-between { justify-content: space-between; }
        .relative { position: relative; }
        .absolute { position: absolute; }
        .cursor-pointer { cursor: pointer; }

        /* Theme Toggle */
        .theme-toggle {
            width: 40px;
            height: 40px;
            border-radius: 50%;
            background: var(--card-bg-dark);
            border: 1px solid rgba(255, 255, 255, 0.1);
            cursor: pointer;
            position: relative;
            overflow: hidden;
        }

        .theme-toggle::before {
            content: '';
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            width: 20px;
            height: 20px;
            background: var(--secondary-color);
            border-radius: 50%;
            transition: all var(--transition-normal);
        }

        .theme-toggle::after {
            content: '';
            position: absolute;
            top: 10px;
            right: 10px;
            width: 8px;
            height: 8px;
            background: var(--dark-bg);
            border-radius: 50%;
            opacity: 0;
            transition: all var(--transition-normal);
        }

        body.light-mode .theme-toggle::before {
            transform: translate(-50%, -50%) rotate(180deg);
            background: var(--primary-color);
        }

        body.light-mode .theme-toggle::after {
            opacity: 1;
        }

        /* Keep original styles */
        .loading-screen {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: var(--gradient-dark);
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            z-index: var(--z-modal);
            transition: opacity var(--transition-slow);
        }

        .loading-screen.hidden {
            opacity: 0;
            pointer-events: none;
        }

        .loading-logo {
            font-size: 3.5rem;
            font-weight: 800;
            background: var(--gradient-primary);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            margin-bottom: 20px;
            animation: pulse 2s infinite;
        }

        .loading-bar {
            width: 200px;
            height: 4px;
            background: rgba(255, 255, 255, 0.1);
            border-radius: 2px;
            overflow: hidden;
            margin-top: 20px;
        }

        .loading-progress {
            height: 100%;
            background: var(--gradient-primary);
            width: 0%;
            transition: width 0.3s ease;
        }

        /* Auth Modal */
        .auth-modal {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(15, 15, 35, 0.95);
            backdrop-filter: blur(10px);
            display: flex;
            align-items: center;
            justify-content: center;
            z-index: var(--z-modal);
            padding: 20px;
        }

        .auth-modal.hidden {
            display: none;
        }

        .auth-modal-content {
            background: var(--card-bg-dark);
            padding: 0;
            border-radius: var(--border-radius-xl);
            max-width: 450px;
            width: 100%;
            overflow: hidden;
            box-shadow: 0 25px 50px var(--shadow-color);
            border: 1px solid rgba(255, 255, 255, 0.1);
        }

        body.light-mode .auth-modal-content {
            background: var(--card-bg-light);
            border: 1px solid rgba(0, 0, 0, 0.1);
        }

        .auth-header {
            background: var(--gradient-primary);
            padding: 40px 30px;
            color: white;
            text-align: center;
        }

        .auth-body {
            padding: 40px 30px;
        }

        .form-group {
            margin-bottom: 20px;
            text-align: left;
        }

        .form-label {
            display: block;
            margin-bottom: 8px;
            font-weight: 600;
            color: var(--secondary-color);
        }

        body.light-mode .form-label {
            color: var(--primary-color);
        }

        .form-input {
            width: 100%;
            padding: 14px;
            border: 2px solid rgba(255,255,255,0.2);
            border-radius: var(--border-radius-sm);
            background: rgba(255,255,255,0.1);
            color: white;
            font-size: 16px;
            transition: all var(--transition-normal);
        }

        body.light-mode .form-input {
            border: 2px solid rgba(0,0,0,0.2);
            background: rgba(0,0,0,0.05);
            color: var(--text-light);
        }

        .form-input:focus {
            outline: none;
            border-color: var(--primary-color);
            box-shadow: 0 0 0 3px rgba(255, 107, 53, 0.1);
        }

        .btn {
            padding: 14px;
            border: none;
            border-radius: var(--border-radius-sm);
            background: var(--gradient-primary);
            color: white;
            font-weight: bold;
            font-size: 16px;
            cursor: pointer;
            transition: all var(--transition-normal);
        }

        .btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 10px 20px rgba(255, 107, 53, 0.3);
        }

        .btn:disabled {
            opacity: 0.5;
            cursor: not-allowed;
            transform: none;
            box-shadow: none;
        }

        .btn-secondary {
            background: transparent;
            border: 2px solid var(--primary-color);
            color: var(--primary-color);
        }

        .btn-secondary:hover {
            background: var(--primary-color);
            color: white;
        }

        .error-message {
            color: var(--accent-color);
            margin: 10px 0;
            padding: 12px;
            background: rgba(255, 56, 100, 0.1);
            border-radius: var(--border-radius-sm);
            display: none;
            font-weight: 600;
            text-align: center;
            border: 1px solid rgba(255, 56, 100, 0.2);
        }

        .error-message.show {
            display: block;
            animation: slideUp 0.3s ease;
        }

        .auth-switch {
            text-align: center;
            margin-top: 20px;
            color: var(--secondary-color);
            font-size: 14px;
        }

        body.light-mode .auth-switch {
            color: var(--text-light);
        }

        .auth-link {
            color: var(--primary-color);
            cursor: pointer;
            font-weight: 600;
            text-decoration: none;
            transition: color var(--transition-fast);
        }

        .auth-link:hover {
            color: var(--accent-color);
            text-decoration: underline;
        }

        /* Toast */
        .toast {
            position: fixed;
            top: 20px;
            right: 20px;
            padding: 15px 20px;
            border-radius: var(--border-radius-md);
            color: white;
            font-weight: 600;
            z-index: var(--z-toast);
            transform: translateX(200%);
            transition: transform var(--transition-normal);
            max-width: 300px;
            word-wrap: break-word;
            box-shadow: 0 10px 30px var(--shadow-color);
            backdrop-filter: blur(10px);
        }

        .toast.show {
            transform: translateX(0);
        }

        .toast.success {
            background: rgba(46, 204, 113, 0.9);
            border: 1px solid rgba(46, 204, 113, 0.3);
        }

        .toast.error {
            background: rgba(255, 56, 100, 0.9);
            border: 1px solid rgba(255, 56, 100, 0.3);
        }

        .toast.info {
            background: rgba(52, 152, 219, 0.9);
            border: 1px solid rgba(52, 152, 219, 0.3);
        }

        /* App Container */
        #appContainer {
            opacity: 0;
            animation: fadeIn 0.5s ease forwards 0.3s;
            display: none;
        }

        #appContainer.active {
            display: block;
        }

        /* Header */
        .header {
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            height: var(--header-height);
            background: rgba(15, 15, 35, 0.9);
            backdrop-filter: blur(10px);
            padding: 0 20px;
            display: flex;
            align-items: center;
            justify-content: space-between;
            z-index: var(--z-header);
            border-bottom: 1px solid rgba(255, 255, 255, 0.1);
        }

        body.light-mode .header {
            background: rgba(248, 249, 250, 0.9);
            border-bottom: 1px solid rgba(0, 0, 0, 0.1);
        }

        /* Logo */
        .logo-3d {
            font-size: 2.5rem;
            font-weight: 800;
            background: var(--gradient-primary);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            text-shadow: 0 10px 30px rgba(255, 107, 53, 0.3);
        }

        /* Main Content */
        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 100px 20px 20px;
        }

        .page {
            display: none;
        }

        .page.active {
            display: block;
        }

        /* Bottom Navigation */
        .bottom-nav {
            position: fixed;
            bottom: 0;
            left: 0;
            right: 0;
            background: rgba(15, 15, 35, 0.9);
            backdrop-filter: blur(10px);
            display: flex;
            justify-content: space-around;
            padding: 15px;
            border-top: 1px solid rgba(255, 255, 255, 0.1);
            z-index: var(--z-header);
        }

        body.light-mode .bottom-nav {
            background: rgba(248, 249, 250, 0.9);
            border-top: 1px solid rgba(0, 0, 0, 0.1);
        }

        .nav-item {
            color: var(--secondary-color);
            text-align: center;
            cursor: pointer;
            padding: 8px 15px;
            border-radius: var(--border-radius-sm);
            transition: all var(--transition-normal);
            flex: 1;
            max-width: 80px;
        }

        body.light-mode .nav-item {
            color: var(--text-light);
        }

        .nav-item.active {
            color: var(--primary-color);
            background: rgba(255, 107, 53, 0.1);
            transform: translateY(-5px);
        }

        .nav-item:hover:not(.active) {
            background: rgba(255, 255, 255, 0.1);
        }

        .nav-icon {
            font-size: 20px;
            margin-bottom: 4px;
        }

        .nav-label {
            font-size: 12px;
            font-weight: 600;
        }

        /* Animations */
        @keyframes pulse {
            0%, 100% { opacity: 1; }
            50% { opacity: 0.5; }
        }

        @keyframes fadeIn {
            from { opacity: 0; }
            to { opacity: 1; }
        }

        @keyframes slideUp {
            from { 
                opacity: 0;
                transform: translateY(20px);
            }
            to { 
                opacity: 1;
                transform: translateY(0);
            }
        }

        @keyframes spin {
            from { transform: rotate(0deg); }
            to { transform: rotate(360deg); }
        }

        /* Loading Spinner */
        .spinner {
            display: inline-block;
            width: 20px;
            height: 20px;
            border: 3px solid rgba(255, 255, 255, 0.3);
            border-radius: 50%;
            border-top-color: var(--primary-color);
            animation: spin 1s ease-in-out infinite;
            margin-right: 10px;
        }

        /* Post Styles */
        .post-composer {
            background: var(--card-bg-dark);
            padding: 25px;
            border-radius: var(--border-radius-lg);
            margin-bottom: 25px;
            border: 1px solid rgba(255, 255, 255, 0.1);
        }

        .composer-header {
            display: flex;
            gap: 15px;
            margin-bottom: 20px;
        }

        .avatar {
            width: 50px;
            height: 50px;
            border-radius: 50%;
            background: var(--gradient-secondary);
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: bold;
            color: white;
            font-size: 20px;
        }

        .composer-textarea {
            flex: 1;
            background: transparent;
            border: none;
            color: white;
            font-size: 18px;
            resize: none;
            min-height: 100px;
            font-family: inherit;
            outline: none;
        }

        body.light-mode .composer-textarea {
            color: var(--text-light);
        }

        .composer-actions {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding-left: 65px;
        }

        .action-buttons {
            display: flex;
            gap: 15px;
        }

        .action-btn {
            background: none;
            border: none;
            color: var(--primary-color);
            font-size: 18px;
            cursor: pointer;
            padding: 8px;
            border-radius: 8px;
            transition: all var(--transition-normal);
        }

        .action-btn:hover {
            background: rgba(255,255,255,0.1);
        }

        /* Post Feed */
        .post-feed {
            display: flex;
            flex-direction: column;
            gap: 20px;
        }

        .post-card {
            background: var(--card-bg-dark);
            padding: 25px;
            border-radius: var(--border-radius-lg);
            border: 1px solid rgba(255,255,255,0.1);
            transition: all var(--transition-normal);
        }

        .post-card:hover {
            transform: translateY(-3px);
            box-shadow: 0 10px 30px var(--shadow-color);
        }

        .post-header {
            display: flex;
            align-items: center;
            gap: 15px;
            margin-bottom: 15px;
        }

        .post-user-info {
            flex: 1;
        }

        .post-user-name {
            font-weight: bold;
            font-size: 16px;
            cursor: pointer;
        }

        .post-user-handle {
            color: var(--secondary-color);
            font-size: 14px;
            cursor: pointer;
        }

        .post-time {
            color: var(--secondary-color);
            font-size: 12px;
        }

        .post-content {
            margin-bottom: 15px;
            line-height: 1.6;
        }

        .post-actions {
            display: flex;
            justify-content: space-around;
            border-top: 1px solid rgba(255,255,255,0.1);
            padding-top: 15px;
        }

        .post-action-btn {
            background: none;
            border: none;
            color: var(--secondary-color);
            cursor: pointer;
            padding: 8px 15px;
            border-radius: 8px;
            display: flex;
            align-items: center;
            gap: 8px;
            font-weight: 600;
            transition: all var(--transition-normal);
        }

        .post-action-btn:hover {
            background: rgba(255,255,255,0.1);
        }

        .post-action-btn.liked {
            color: var(--accent-color);
        }

        /* Messages */
        .messages-container {
            background: var(--card-bg-dark);
            border-radius: var(--border-radius-lg);
            overflow: hidden;
            border: 1px solid rgba(255,255,255,0.1);
        }

        .chat-header {
            padding: 25px;
            border-bottom: 1px solid rgba(255,255,255,0.1);
            background: rgba(255,107,53,0.1);
        }

        .chat-messages {
            height: 400px;
            overflow-y: auto;
            padding: 20px;
        }

        .message {
            display: flex;
            gap: 10px;
            margin-bottom: 15px;
        }

        .message.own {
            flex-direction: row-reverse;
        }

        .message-content {
            background: rgba(255,255,255,0.1);
            padding: 12px 16px;
            border-radius: 20px;
            max-width: 70%;
            word-wrap: break-word;
        }

        .message.own .message-content {
            background: var(--gradient-primary);
            color: white;
        }

        /* Notifications */
        .notifications-list {
            max-height: 500px;
            overflow-y: auto;
        }

        .notification-item {
            display: flex;
            align-items: center;
            gap: 15px;
            padding: 20px;
            border-bottom: 1px solid rgba(255,255,255,0.1);
            transition: all var(--transition-normal);
            cursor: pointer;
        }

        .notification-item:hover {
            background: rgba(255,255,255,0.05);
        }

        .notification-content {
            flex: 1;
        }

        .notification-time {
            color: var(--secondary-color);
            font-size: 12px;
        }

        /* Profile Page Styles */
        .profile-header {
            background: var(--card-bg-dark);
            border-radius: var(--border-radius-lg);
            overflow: hidden;
            margin-bottom: 25px;
            border: 1px solid rgba(255,255,255,0.1);
        }

        .profile-banner {
            height: 200px;
            background: var(--gradient-primary);
            position: relative;
        }

        .profile-avatar-container {
            position: absolute;
            top: 150px;
            left: 30px;
        }

        .profile-avatar {
            width: 100px;
            height: 100px;
            border-radius: 50%;
            background: var(--gradient-secondary);
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 40px;
            font-weight: bold;
            color: white;
            border: 4px solid var(--card-bg-dark);
        }

        .profile-info {
            padding: 80px 30px 30px;
        }

        .profile-stats {
            display: flex;
            gap: 30px;
            margin: 20px 0;
        }

        .stat {
            text-align: center;
            cursor: pointer;
            transition: all var(--transition-normal);
        }

        .stat:hover {
            transform: scale(1.1);
        }

        .stat-value {
            font-size: 1.5em;
            font-weight: bold;
            color: var(--primary-color);
        }

        .stat-label {
            font-size: 0.9em;
            color: var(--secondary-color);
        }

        /* Media Queries */
        @media (max-width: 768px) {
            .container {
                padding: 80px 15px 15px;
            }
            
            .header {
                padding: 0 15px;
            }
            
            .auth-modal-content {
                margin: 20px;
            }
            
            .profile-avatar-container {
                left: 50%;
                transform: translateX(-50%);
                top: 140px;
            }
            
            .profile-info {
                padding-top: 60px;
                text-align: center;
            }

            .search-advanced {
                display: none;
            }

            .music-player-complete {
                bottom: 70px;
                left: 10px;
                right: 10px;
            }

            .quick-actions {
                right: 10px;
            }

            .fab {
                right: 10px;
                bottom: 10px;
            }
        }

        @media (max-width: 480px) {
            :root {
                --header-height: 60px;
                --nav-height: 55px;
            }
            
            .auth-body {
                padding: 30px 20px;
            }
            
            .auth-header {
                padding: 30px 20px;
            }
            
            .composer-actions {
                flex-direction: column;
                gap: 15px;
                padding-left: 0;
            }
            
            .profile-stats {
                flex-wrap: wrap;
                justify-content: center;
                gap: 20px;
            }

            .music-player-complete {
                flex-direction: column;
                gap: 10px;
                padding: 10px;
            }

            .music-controls {
                width: 100%;
                justify-content: center;
            }
        }
    </style>
</head>
<body>
    <!-- Animated Background -->
    <div class="animated-bg"></div>

    <!-- Loading Screen -->
    <div class="loading-screen" id="loadingScreen">
        <div class="loading-logo">
            <i class="fas fa-fire"></i> PrimeMar Pro
        </div>
        <div class="loading-bar">
            <div class="loading-progress" id="loadingProgress"></div>
        </div>
        <p style="margin-top: 20px; opacity: 0.7;">Loading next-gen experience...</p>
    </div>

    <!-- Offline Banner -->
    <div class="offline-banner" id="offlineBanner">
        <i class="fas fa-wifi-slash"></i> You're offline. Some features may be limited.
    </div>

    <!-- Connection Status -->
    <div class="connection-status" id="connectionStatus">
        <i class="fas fa-wifi"></i> Online
    </div>

    <!-- Toast Container -->
    <div id="toastContainer"></div>

    <!-- Confetti Container -->
    <div class="confetti-container" id="confettiContainer"></div>

    <!-- Error Boundary -->
    <div class="error-boundary d-none" id="errorBoundary">
        <div class="error-content">
            <div style="color: var(--accent-color); margin-bottom: 20px;">
                <i class="fas fa-exclamation-triangle fa-4x"></i>
            </div>
            <h3 style="margin-bottom: 15px;">Something went wrong</h3>
            <p style="margin-bottom: 20px;" id="errorMessage">We've encountered an unexpected error.</p>
            <div style="display: flex; gap: 15px;">
                <button class="btn" onclick="window.location.reload()">
                    <i class="fas fa-redo"></i> Reload Page
                </button>
                <button class="btn-secondary" onclick="primeMarApp.clearCache()">
                    <i class="fas fa-trash"></i> Clear Cache
                </button>
            </div>
        </div>
    </div>

    <!-- Auth Modal -->
    <div class="auth-modal" id="authModal">
        <div class="auth-modal-content">
            <div class="auth-header">
                <h1 class="logo-3d" style="font-size: 2.5em; margin-bottom: 10px;">
                    <i class="fas fa-fire"></i> PrimeMar Pro
                </h1>
                <p style="font-size: 1.1em; font-weight: 600; color: white;">Next Generation Social Experience</p>
            </div>
            
            <div class="auth-body">
                <!-- Login Form -->
                <div id="loginForm">
                    <h2 style="margin-bottom: 8px; text-align: center; font-size: 1.8em;">Welcome Back</h2>
                    <p style="color: var(--secondary-color); text-align: center; margin-bottom: 30px; font-weight: 600;">Sign in to your account</p>
                    
                    <div class="error-message" id="loginError"></div>
                    
                    <div class="form-group">
                        <label class="form-label">Email or Username</label>
                        <input type="text" class="form-input" id="loginEmail" placeholder="Enter email or username" required>
                    </div>
                    
                    <div class="form-group">
                        <label class="form-label">Password</label>
                        <input type="password" class="form-input" id="loginPassword" placeholder="Enter your password" required>
                    </div>
                    
                    <div style="display: flex; justify-content: space-between; align-items: center; margin: 20px 0;">
                        <label style="display: flex; align-items: center; gap: 8px; cursor: pointer;">
                            <input type="checkbox" id="rememberMe">
                            <span>Remember me</span>
                        </label>
                        <a href="#" class="auth-link" onclick="primeMarApp.showForgotPassword()">Forgot password?</a>
                    </div>
                    
                    <button class="btn" id="loginBtn">
                        <i class="fas fa-sign-in-alt"></i> Sign In
                    </button>
                    
                    <div style="position: relative; margin: 30px 0;">
                        <div style="border-top: 1px solid rgba(255,255,255,0.1);"></div>
                        <span style="position: absolute; top: 50%; left: 50%; transform: translate(-50%, -50%); background: var(--card-bg-dark); padding: 0 15px; color: var(--secondary-color);">
                            Or continue with
                        </span>
                    </div>
                    
                    <div style="display: grid; grid-template-columns: repeat(2, 1fr); gap: 10px; margin-bottom: 20px;">
                        <button class="btn-secondary" onclick="primeMarApp.signInWithGoogle()">
                            <i class="fab fa-google"></i> Google
                        </button>
                        <button class="btn-secondary" onclick="primeMarApp.signInWithGithub()">
                            <i class="fab fa-github"></i> GitHub
                        </button>
                    </div>
                    
                    <div class="auth-switch">
                        Don't have an account? 
                        <span class="auth-link" onclick="primeMarApp.showSignupForm()">Sign up</span>
                    </div>
                </div>

                <!-- Signup Form -->
                <div id="signupForm" class="d-none">
                    <h2 style="margin-bottom: 8px; text-align: center; font-size: 1.8em;">Join PrimeMar Pro</h2>
                    <p style="color: var(--secondary-color); text-align: center; margin-bottom: 30px; font-weight: 600;">Create your account</p>
                    
                    <div class="error-message" id="signupError"></div>
                    
                    <div class="form-group">
                        <label class="form-label">Full Name</label>
                        <input type="text" class="form-input" id="signupName" placeholder="Enter your full name" required>
                    </div>
                    
                    <div class="form-group">
                        <label class="form-label">Username</label>
                        <input type="text" class="form-input" id="signupUsername" placeholder="Choose a username" required>
                        <div style="font-size: 12px; color: var(--secondary-color); margin-top: 5px;">
                            Only letters, numbers, and underscores
                        </div>
                    </div>
                    
                    <div class="form-group">
                        <label class="form-label">Email</label>
                        <input type="email" class="form-input" id="signupEmail" placeholder="Enter your email" required>
                    </div>
                    
                    <div class="form-group">
                        <label class="form-label">Password</label>
                        <input type="password" class="form-input" id="signupPassword" placeholder="Create a strong password" required>
                        <div style="font-size: 12px; color: var(--secondary-color); margin-top: 5px;">
                            Minimum 8 characters with letters and numbers
                        </div>
                    </div>
                    
                    <div class="form-group">
                        <label class="form-label">Confirm Password</label>
                        <input type="password" class="form-input" id="signupConfirmPassword" placeholder="Confirm your password" required>
                    </div>
                    
                    <div style="margin: 20px 0;">
                        <label style="display: flex; align-items: flex-start; gap: 8px; cursor: pointer;">
                            <input type="checkbox" id="acceptTerms" required>
                            <span>I agree to the <a href="#" class="auth-link">Terms of Service</a> and <a href="#" class="auth-link">Privacy Policy</a></span>
                        </label>
                    </div>
                    
                    <button class="btn" id="signupBtn">
                        <i class="fas fa-user-plus"></i> Create Account
                    </button>
                    
                    <div class="auth-switch" style="margin-top: 30px;">
                        Already have an account? 
                        <span class="auth-link" onclick="primeMarApp.showLoginForm()">Sign in</span>
                    </div>
                </div>

                <!-- Forgot Password Form -->
                <div id="forgotPasswordForm" class="d-none">
                    <h2 style="margin-bottom: 8px; text-align: center; font-size: 1.8em;">Reset Password</h2>
                    <p style="color: var(--secondary-color); text-align: center; margin-bottom: 30px; font-weight: 600;">Enter your email to reset your password</p>
                    
                    <div class="error-message" id="forgotPasswordError"></div>
                    
                    <div class="form-group">
                        <label class="form-label">Email</label>
                        <input type="email" class="form-input" id="forgotPasswordEmail" placeholder="Enter your email" required>
                    </div>
                    
                    <button class="btn" id="forgotPasswordBtn">
                        <i class="fas fa-paper-plane"></i> Send Reset Link
                    </button>
                    
                    <div class="auth-switch" style="margin-top: 30px;">
                        <span class="auth-link" onclick="primeMarApp.showLoginForm()">Back to login</span>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Main App -->
    <div id="appContainer">
        <!-- Header -->
        <header class="header" id="mainHeader">
            <div class="logo-3d">
                <i class="fas fa-fire"></i> PrimeMar Pro
            </div>
            
            <!-- Advanced Search -->
            <div class="search-advanced">
                <input type="text" class="search-input-advanced" id="searchInput" placeholder="Search users, posts, hashtags...">
                <button class="action-btn" style="position: absolute; right: 10px; top: 50%; transform: translateY(-50%);">
                    <i class="fas fa-search"></i>
                </button>
                <div class="search-results glass-effect d-none" id="searchResults"></div>
            </div>
            
            <div style="display: flex; align-items: center; gap: 20px;">
                <!-- Theme Toggle -->
                <div class="theme-toggle" id="themeToggle" title="Toggle theme"></div>
                
                <!-- Notifications -->
                <button class="action-btn" style="position: relative;" id="notificationBtn" onclick="primeMarApp.showPage('notificationsPage')" title="Notifications">
                    <i class="fas fa-bell"></i>
                    <span class="notification-badge" style="position: absolute; top: -5px; right: -5px; background: var(--accent-color); color: white; border-radius: 50%; width: 18px; height: 18px; display: flex; align-items: center; justify-content: center; font-size: 10px; font-weight: bold; display: none;" id="notificationCount">0</span>
                </button>
                
                <!-- Profile Dropdown -->
                <div class="relative">
                    <button class="profile-btn" id="profileBtn" style="background: none; border: none; color: var(--secondary-color); font-size: 20px; cursor: pointer;">
                        <i class="fas fa-user"></i>
                    </button>
                    <div class="profile-dropdown glass-effect d-none absolute" style="top: 100%; right: 0; margin-top: 10px; background: var(--card-bg-dark); border-radius: var(--border-radius-md); padding: 10px; min-width: 200px; box-shadow: 0 10px 30px var(--shadow-color); border: 1px solid rgba(255,255,255,0.1);" id="profileDropdown">
                        <button class="dropdown-item" style="background: none; border: none; color: white; padding: 10px 15px; width: 100%; text-align: left; cursor: pointer; border-radius: var(--border-radius-sm); display: flex; align-items: center; gap: 10px;" onclick="primeMarApp.showPage('profilePage')">
                            <i class="fas fa-user"></i>
                            <span>Profile</span>
                        </button>
                        <button class="dropdown-item" style="background: none; border: none; color: white; padding: 10px 15px; width: 100%; text-align: left; cursor: pointer; border-radius: var(--border-radius-sm); display: flex; align-items: center; gap: 10px;" onclick="primeMarApp.showSettings()">
                            <i class="fas fa-cog"></i>
                            <span>Settings</span>
                        </button>
                        <button class="dropdown-item" style="background: none; border: none; color: white; padding: 10px 15px; width: 100%; text-align: left; cursor: pointer; border-radius: var(--border-radius-sm); display: flex; align-items: center; gap: 10px;" onclick="primeMarApp.showBookmarks()">
                            <i class="fas fa-bookmark"></i>
                            <span>Bookmarks</span>
                        </button>
                        <div style="border-top: 1px solid rgba(255,255,255,0.1); margin: 10px 0;"></div>
                        <button class="dropdown-item" style="background: none; border: none; color: var(--accent-color); padding: 10px 15px; width: 100%; text-align: left; cursor: pointer; border-radius: var(--border-radius-sm); display: flex; align-items: center; gap: 10px;" onclick="primeMarApp.logout()">
                            <i class="fas fa-sign-out-alt"></i>
                            <span>Logout</span>
                        </button>
                    </div>
                </div>
            </div>
        </header>

        <!-- Quick Actions Menu -->
        <div class="quick-actions" id="quickActions">
            <button class="quick-action-btn" onclick="primeMarApp.createPostQuick()" title="Quick Post">
                <i class="fas fa-edit"></i>
            </button>
            <button class="quick-action-btn" onclick="primeMarApp.startLiveStream()" title="Go Live">
                <i class="fas fa-video"></i>
            </button>
            <button class="quick-action-btn" onclick="primeMarApp.createPoll()" title="Create Poll">
                <i class="fas fa-chart-bar"></i>
            </button>
            <button class="quick-action-btn" onclick="primeMarApp.createStory()" title="Create Story">
                <i class="fas fa-camera"></i>
            </button>
        </div>

        <!-- FAB -->
        <button class="fab" id="fabBtn" onclick="primeMarApp.toggleQuickActions()" title="Quick Actions">
            <i class="fas fa-plus"></i>
        </button>

        <!-- Music Player -->
        <div class="music-player-complete d-none" id="musicPlayer">
            <img class="music-cover" id="musicCover" src="https://images.unsplash.com/photo-1493225457124-a3eb161ffa5f" alt="Album Cover">
            <div class="music-info">
                <div style="font-weight: bold; overflow: hidden; text-overflow: ellipsis; white-space: nowrap;" id="musicTitle">Now Playing</div>
                <div style="font-size: 14px; color: var(--secondary-color); overflow: hidden; text-overflow: ellipsis; white-space: nowrap;" id="musicArtist">Artist</div>
                <div style="font-size: 12px; color: var(--secondary-color);" id="musicProgress">0:00 / 0:00</div>
            </div>
            <div class="music-controls">
                <button class="music-control" onclick="primeMarApp.prevTrack()" title="Previous">
                    <i class="fas fa-step-backward"></i>
                </button>
                <button class="music-control" onclick="primeMarApp.togglePlay()" title="Play/Pause" id="playBtn">
                    <i class="fas fa-play"></i>
                </button>
                <button class="music-control" onclick="primeMarApp.nextTrack()" title="Next">
                    <i class="fas fa-step-forward"></i>
                </button>
                <button class="music-control" onclick="primeMarApp.toggleMute()" title="Mute" id="muteBtn">
                    <i class="fas fa-volume-up"></i>
                </button>
            </div>
        </div>

        <!-- Memory Monitor -->
        <div class="memory-monitor" id="memoryMonitor">
            Memory: <span id="memoryUsage">0 MB</span>
        </div>

        <!-- Main Content -->
        <main class="container">
            <!-- Home Page -->
            <section id="homePage" class="page active">
                <!-- News Ticker -->
                <div class="news-ticker mb-4">
                    <div class="news-content">
                        <span style="margin-right: 30px;"> PrimeMar Pro v2.0 Launched!</span>
                        <span style="margin-right: 30px;"> Live streaming now available</span>
                        <span style="margin-right: 30px;"> New music integration feature</span>
                        <span style="margin-right: 30px;"> Real-time analytics dashboard</span>
                    </div>
                </div>

                <!-- Statistics Dashboard -->
                <div class="analytics-grid mb-4">
                    <div class="analytics-card">
                        <div class="stat-value text-gradient" id="totalPosts">0</div>
                        <div class="stat-label">Total Posts</div>
                    </div>
                    <div class="analytics-card">
                        <div class="stat-value text-gradient" id="activeUsers">0</div>
                        <div class="stat-label">Active Users</div>
                    </div>
                    <div class="analytics-card">
                        <div class="stat-value text-gradient" id="newFollowers">0</div>
                        <div class="stat-label">New Followers</div>
                    </div>
                    <div class="analytics-card">
                        <div class="stat-value text-gradient" id="engagementRate">0%</div>
                        <div class="stat-label">Engagement Rate</div>
                    </div>
                </div>

                <!-- Stories Carousel -->
                <div class="stories-carousel mb-4" id="storiesCarousel">
                    <!-- Stories will be loaded here -->
                </div>

                <!-- Advanced Post Composer -->
                <div class="post-composer-advanced">
                    <div class="composer-header">
                        <div class="avatar cursor-pointer" id="userAvatar" onclick="primeMarApp.showPage('profilePage')">U</div>
                        <div style="flex: 1;">
                            <textarea class="composer-textarea w-100" id="postTextarea" placeholder="What's on your mind? Use #hashtags and @mentions..." rows="3" maxlength="2000"></textarea>
                            <div style="display: flex; justify-content: space-between; align-items: center; margin-top: 15px;">
                                <div class="action-buttons">
                                    <button class="action-btn" onclick="primeMarApp.uploadMedia()" title="Add Media">
                                        <i class="fas fa-image"></i>
                                    </button>
                                    <button class="action-btn" onclick="primeMarApp.recordVoiceNote()" title="Voice Note">
                                        <i class="fas fa-microphone"></i>
                                    </button>
                                    <button class="action-btn" onclick="primeMarApp.toggleEmojiPicker('post')" title="Emoji">
                                        <i class="fas fa-smile"></i>
                                    </button>
                                    <button class="action-btn" onclick="primeMarApp.addLocation()" title="Location">
                                        <i class="fas fa-map-marker-alt"></i>
                                    </button>
                                    <button class="action-btn" onclick="primeMarApp.addPoll()" title="Add Poll">
                                        <i class="fas fa-poll"></i>
                                    </button>
                                    <button class="action-btn" onclick="primeMarApp.schedulePost()" title="Schedule">
                                        <i class="fas fa-clock"></i>
                                    </button>
                                </div>
                                <button class="btn" id="postBtn" disabled onclick="primeMarApp.createPostAdvanced()">
                                    <i class="fas fa-paper-plane"></i> Post
                                </button>
                            </div>
                        </div>
                    </div>
                    
                    <!-- Upload Zone -->
                    <div class="upload-zone d-none" id="uploadZone">
                        <i class="fas fa-cloud-upload-alt fa-3x" style="color: var(--primary-color); margin-bottom: 15px;"></i>
                        <h3 style="margin-bottom: 10px;">Drag & Drop Media Here</h3>
                        <p style="color: var(--secondary-color); margin-bottom: 20px;">Upload images, videos, or documents</p>
                        <button class="btn" onclick="document.getElementById('mediaInput').click()">
                            Browse Files
                        </button>
                        <input type="file" class="d-none" id="mediaInput" multiple accept="image/*,video/*,audio/*">
                    </div>
                    
                    <!-- Media Preview -->
                    <div class="image-gallery" id="mediaPreview"></div>
                    
                    <!-- Poll Editor -->
                    <div class="poll-editor d-none" id="pollEditor">
                        <h4 style="margin-bottom: 15px;">Create Poll</h4>
                        <input type="text" class="form-input mb-3" id="pollQuestion" placeholder="Poll question">
                        <div id="pollOptions">
                            <div class="poll-option-editor">
                                <input type="text" class="poll-option-input" placeholder="Option 1">
                                <button class="action-btn" style="color: var(--accent-color);" onclick="this.parentElement.remove()">
                                    <i class="fas fa-times"></i>
                                </button>
                            </div>
                            <div class="poll-option-editor">
                                <input type="text" class="poll-option-input" placeholder="Option 2">
                                <button class="action-btn" style="color: var(--accent-color);" onclick="this.parentElement.remove()">
                                    <i class="fas fa-times"></i>
                                </button>
                            </div>
                        </div>
                        <button class="btn-secondary mt-3" onclick="primeMarApp.addPollOption()">
                            <i class="fas fa-plus"></i> Add Option
                        </button>
                    </div>
                </div>

                <!-- Filter Bar -->
                <div class="filter-bar mb-4">
                    <div class="filter-chip active" onclick="primeMarApp.filterPosts('all')">All Posts</div>
                    <div class="filter-chip" onclick="primeMarApp.filterPosts('following')">Following</div>
                    <div class="filter-chip" onclick="primeMarApp.filterPosts('trending')">Trending</div>
                    <div class="filter-chip" onclick="primeMarApp.filterPosts('photos')">Photos</div>
                    <div class="filter-chip" onclick="primeMarApp.filterPosts('videos')">Videos</div>
                </div>

                <!-- Feed -->
                <div id="feedContainer">
                    <h2 style="margin: 20px 0; text-align: center;">Your Feed</h2>
                    <div class="post-feed" id="postFeed">
                        <!-- Posts will be loaded here -->
                    </div>
                </div>

                <!-- Load More -->
                <div class="text-center mt-4">
                    <button class="btn-secondary" id="loadMoreBtn" onclick="primeMarApp.loadMorePosts()">
                        <i class="fas fa-sync"></i> Load More
                    </button>
                </div>
            </section>

            <!-- Profile Page -->
            <section id="profilePage" class="page">
                <div class="profile-header">
                    <div class="profile-banner" id="profileBanner">
                        <button class="action-btn" style="position: absolute; top: 20px; right: 20px; background: rgba(0,0,0,0.5); color: white;" onclick="primeMarApp.editBanner()">
                            <i class="fas fa-camera"></i>
                        </button>
                    </div>
                    <div class="profile-avatar-container">
                        <div class="profile-avatar" id="profileAvatar">U</div>
                        <button class="action-btn" style="position: absolute; bottom: 0; right: 0; background: var(--accent-color); color: white;" onclick="primeMarApp.editAvatar()">
                            <i class="fas fa-camera"></i>
                        </button>
                    </div>
                    <div class="profile-info">
                        <div style="display: flex; justify-content: space-between; align-items: flex-start;">
                            <div>
                                <h1 style="font-size: 1.8em; margin-bottom: 5px;" id="profileName">Loading...</h1>
                                <p style="color: var(--secondary-color); margin-bottom: 15px;" id="profileHandle">@username</p>
                                <p style="margin-bottom: 20px;" id="profileBio">Welcome to my PrimeMar profile!</p>
                            </div>
                            <button class="btn" style="padding: 10px 20px;" onclick="primeMarApp.editProfile()">
                                <i class="fas fa-edit"></i> Edit Profile
                            </button>
                        </div>
                        
                        <div class="profile-stats">
                            <div class="stat" onclick="primeMarApp.showPosts()">
                                <div class="stat-value" id="postsCount">0</div>
                                <div class="stat-label">Posts</div>
                            </div>
                            <div class="stat" onclick="primeMarApp.showFollowers()">
                                <div class="stat-value" id="followersCount">0</div>
                                <div class="stat-label">Followers</div>
                            </div>
                            <div class="stat" onclick="primeMarApp.showFollowing()">
                                <div class="stat-value" id="followingCount">0</div>
                                <div class="stat-label">Following</div>
                            </div>
                            <div class="stat" onclick="primeMarApp.showLikes()">
                                <div class="stat-value" id="likesCount">0</div>
                                <div class="stat-label">Likes</div>
                            </div>
                        </div>
                        
                        <div style="display: flex; gap: 15px; margin-top: 25px;">
                            <button class="btn" style="flex: 1;" onclick="primeMarApp.shareProfile()">
                                <i class="fas fa-share-alt"></i> Share Profile
                            </button>
                            <button class="btn-secondary" style="flex: 1;" onclick="primeMarApp.logout()">
                                <i class="fas fa-sign-out-alt"></i> Logout
                            </button>
                        </div>
                    </div>
                </div>

                <!-- Profile Posts -->
                <div id="profilePosts">
                    <h2 style="margin: 20px 0; text-align: center;">Your Posts</h2>
                    <div class="post-feed" id="profilePostsFeed">
                        <!-- Profile posts will be loaded here -->
                    </div>
                </div>
            </section>

            <!-- Messages Page -->
            <section id="messagesPage" class="page">
                <div class="chat-advanced">
                    <div class="messages-list">
                        <div class="chat-header">
                            <h2 style="display: flex; align-items: center; gap: 10px;">
                                <i class="fas fa-comments"></i> Messages
                            </h2>
                            <button class="btn" style="margin-top: 15px; padding: 8px 20px;" onclick="primeMarApp.startNewChat()">
                                <i class="fas fa-plus"></i> New Message
                            </button>
                        </div>
                        <div id="conversationsList">
                            <!-- Conversations will be loaded here -->
                        </div>
                    </div>
                    <div class="chat-view d-none" id="chatView">
                        <div class="chat-header" style="display: flex; justify-content: space-between; align-items: center;">
                            <div style="display: flex; align-items: center; gap: 15px;">
                                <button class="btn-secondary" onclick="primeMarApp.closeChat()">
                                    <i class="fas fa-arrow-left"></i>
                                </button>
                                <div>
                                    <h3 id="chatPartnerName">User</h3>
                                    <p style="color: var(--secondary-color); font-size: 14px;" id="chatPartnerStatus">Online</p>
                                </div>
                            </div>
                            <div style="display: flex; gap: 10px;">
                                <button class="action-btn" onclick="primeMarApp.showChatInfo()" title="Chat Info">
                                    <i class="fas fa-info-circle"></i>
                                </button>
                                <button class="action-btn" onclick="primeMarApp.videoCall()" title="Video Call">
                                    <i class="fas fa-video"></i>
                                </button>
                                <button class="action-btn" onclick="primeMarApp.voiceCall()" title="Voice Call">
                                    <i class="fas fa-phone"></i>
                                </button>
                            </div>
                        </div>
                        <div class="chat-messages" id="chatMessages"></div>
                        <div class="chat-input-container">
                            <button class="action-btn" onclick="primeMarApp.toggleEmojiPicker('chat')">
                                <i class="fas fa-smile"></i>
                            </button>
                            <button class="action-btn" onclick="primeMarApp.attachFile()">
                                <i class="fas fa-paperclip"></i>
                            </button>
                            <input type="text" class="chat-input" id="messageInput" placeholder="Type a message...">
                            <button class="voice-message" id="voiceMessageBtn" 
                                    onmousedown="primeMarApp.startVoiceRecording()" 
                                    onmouseup="primeMarApp.stopVoiceRecording()">
                                <div class="voice-wave">
                                    <div class="voice-bar"></div>
                                    <div class="voice-bar"></div>
                                    <div class="voice-bar"></div>
                                    <div class="voice-bar"></div>
                                    <div class="voice-bar"></div>
                                </div>
                            </button>
                            <button class="btn" id="sendBtn" onclick="primeMarApp.sendMessage()">
                                <i class="fas fa-paper-plane"></i>
                            </button>
                        </div>
                    </div>
                </div>
            </section>

            <!-- Notifications Page -->
            <section id="notificationsPage" class="page">
                <div class="messages-container">
                    <div class="chat-header">
                        <h2 style="display: flex; align-items: center; gap: 10px;">
                            <i class="fas fa-bell"></i> Notifications
                        </h2>
                        <button class="btn" style="margin-top: 15px; padding: 8px 20px;" onclick="primeMarApp.markAllAsRead()">
                            <i class="fas fa-check-double"></i> Mark all as read
                        </button>
                    </div>
                    <div class="notifications-list" id="notificationsList">
                        <!-- Notifications will be loaded here -->
                    </div>
                </div>
            </section>

            <!-- Discover Page -->
            <section id="discoverPage" class="page">
                <div style="background: var(--card-bg-dark); border-radius: var(--border-radius-lg); padding: 30px; border: 1px solid rgba(255,255,255,0.1);">
                    <h2 style="margin-bottom: 25px; text-align: center;">
                        <i class="fas fa-compass"></i> Discover
                    </h2>
                    
                    <!-- Trending Hashtags -->
                    <div style="background: rgba(255,255,255,0.05); padding: 20px; border-radius: var(--border-radius-md); margin-bottom: 20px;">
                        <h3 style="margin-bottom: 15px;">Trending Hashtags</h3>
                        <div style="display: flex; flex-wrap: wrap; gap: 10px;" id="trendingHashtags">
                            <!-- Hashtags will be loaded here -->
                        </div>
                    </div>
                    
                    <!-- Suggested Users -->
                    <div style="background: rgba(255,255,255,0.05); padding: 20px; border-radius: var(--border-radius-md); margin-bottom: 20px;">
                        <h3 style="margin-bottom: 15px;">Suggested Users</h3>
                        <div id="suggestedUsers">
                            <!-- Users will be loaded here -->
                        </div>
                    </div>
                    
                    <div id="discoverContent" style="margin-top: 40px;">
                        <!-- Discover content will be loaded here -->
                    </div>
                </div>
            </section>

            <!-- Settings Page -->
            <section id="settingsPage" class="page">
                <div style="background: var(--card-bg-dark); border-radius: var(--border-radius-lg); padding: 30px; border: 1px solid rgba(255,255,255,0.1);">
                    <h2 style="margin-bottom: 25px; text-align: center;">
                        <i class="fas fa-cog"></i> Settings
                    </h2>
                    
                    <div style="display: grid; gap: 20px;">
                        <!-- Account Settings -->
                        <div style="background: rgba(255,255,255,0.05); padding: 20px; border-radius: var(--border-radius-md);">
                            <h3 style="margin-bottom: 15px;">Account Settings</h3>
                            <div style="display: flex; flex-direction: column; gap: 15px;">
                                <div>
                                    <label class="form-label">Email</label>
                                    <input type="email" class="form-input" id="settingsEmail" value="user@example.com">
                                </div>
                                <div>
                                    <label class="form-label">Username</label>
                                    <input type="text" class="form-input" id="settingsUsername" value="username">
                                </div>
                                <button class="btn" onclick="primeMarApp.updateAccount()">
                                    Update Account
                                </button>
                            </div>
                        </div>
                        
                        <!-- Privacy Settings -->
                        <div style="background: rgba(255,255,255,0.05); padding: 20px; border-radius: var(--border-radius-md);">
                            <h3 style="margin-bottom: 15px;">Privacy Settings</h3>
                            <div style="display: flex; flex-direction: column; gap: 15px;">
                                <div style="display: flex; justify-content: space-between; align-items: center;">
                                    <span>Profile Visibility</span>
                                    <select class="form-input" style="width: auto;" id="privacyProfile">
                                        <option value="public">Public</option>
                                        <option value="private">Private</option>
                                        <option value="friends">Friends Only</option>
                                    </select>
                                </div>
                                <div style="display: flex; justify-content: space-between; align-items: center;">
                                    <span>Message Privacy</span>
                                    <select class="form-input" style="width: auto;" id="privacyMessages">
                                        <option value="everyone">Everyone</option>
                                        <option value="friends">Friends Only</option>
                                        <option value="nobody">Nobody</option>
                                    </select>
                                </div>
                                <button class="btn" onclick="primeMarApp.updatePrivacy()">
                                    Update Privacy
                                </button>
                            </div>
                        </div>
                    </div>
                </div>
            </section>
        </main>

        <!-- Bottom Navigation -->
        <nav class="bottom-nav">
            <div class="nav-item active" data-page="homePage">
                <div class="nav-icon"><i class="fas fa-home"></i></div>
                <div class="nav-label">Home</div>
            </div>
            <div class="nav-item" data-page="discoverPage">
                <div class="nav-icon"><i class="fas fa-compass"></i></div>
                <div class="nav-label">Discover</div>
            </div>
            <div class="nav-item" data-page="messagesPage">
                <div class="nav-icon"><i class="fas fa-comments"></i></div>
                <div class="nav-label">Chats</div>
            </div>
            <div class="nav-item" data-page="notificationsPage">
                <div class="nav-icon"><i class="fas fa-bell"></i></div>
                <div class="nav-label">Alerts</div>
            </div>
            <div class="nav-item" data-page="profilePage">
                <div class="nav-icon"><i class="fas fa-user"></i></div>
                <div class="nav-label">Profile</div>
            </div>
        </nav>
    </div>

    <!-- Hidden File Input -->
    <input type="file" class="d-none" id="fileInput" multiple>

    <!-- All Modals -->
    
    <!-- Live Streaming Modal -->
    <div class="modal-complete d-none" id="liveStreamModal">
        <div class="modal-content">
            <div class="modal-header">
                <h3>Go Live</h3>
                <button class="close-btn" onclick="primeMarApp.closeLiveStream()">&times;</button>
            </div>
            <div class="modal-body">
                <div class="live-stream-container" id="liveStreamPreview">
                    <div class="live-badge">LIVE</div>
                    <div class="live-viewers">0 viewers</div>
                    <video class="w-100 h-100" autoplay muted id="liveStreamVideo"></video>
                </div>
                <div style="margin-top: 20px;">
                    <input type="text" class="form-input mb-3" id="streamTitle" placeholder="Stream title">
                    <textarea class="form-input mb-3" id="streamDescription" placeholder="Stream description" rows="3"></textarea>
                    <select class="form-input mb-3" id="streamCategory">
                        <option value="gaming">Gaming</option>
                        <option value="music">Music</option>
                        <option value="talk">Talk</option>
                        <option value="education">Education</option>
                    </select>
                    <div style="display: flex; gap: 15px;">
                        <button class="btn flex-1" id="startStreamBtn" onclick="primeMarApp.startStream()">
                            <i class="fas fa-play"></i> Start Stream
                        </button>
                        <button class="btn-secondary flex-1" onclick="primeMarApp.closeLiveStream()">
                            Cancel
                        </button>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Voice Recorder Modal -->
    <div class="modal-complete d-none" id="voiceRecorderModal">
        <div class="modal-content">
            <div class="modal-header">
                <h3>Record Voice Note</h3>
                <button class="close-btn" onclick="primeMarApp.closeVoiceRecorder()">&times;</button>
            </div>
            <div class="modal-body text-center">
                <div class="voice-waveform mb-4" id="voiceWaveform">
                    <canvas id="voiceCanvas" width="300" height="100"></canvas>
                </div>
                <button class="btn" style="width: 60px; height: 60px; border-radius: 50%; margin-bottom: 20px;" id="recordBtn" onclick="primeMarApp.toggleRecording()">
                    <i class="fas fa-microphone"></i>
                </button>
                <div style="font-size: 2em; font-weight: bold; margin-bottom: 20px;" id="recordingTimer">00:00</div>
                <div style="display: flex; gap: 15px;">
                    <button class="btn-secondary flex-1" id="playBtn" onclick="primeMarApp.playRecording()" disabled>
                        <i class="fas fa-play"></i> Play
                    </button>
                    <button class="btn flex-1" id="sendBtn" onclick="primeMarApp.sendRecording()" disabled>
                        <i class="fas fa-paper-plane"></i> Send
                    </button>
                </div>
            </div>
        </div>
    </div>

    <!-- Profile Edit Modal -->
    <div class="modal-complete d-none" id="profileEditModal">
        <div class="modal-content">
            <div class="modal-header">
                <h3>Edit Profile</h3>
                <button class="close-btn" onclick="primeMarApp.closeProfileEdit()">&times;</button>
            </div>
            <div class="modal-body">
                <div class="profile-edit-section">
                    <label class="profile-edit-label">Profile Picture</label>
                    <div style="display: flex; align-items: center; gap: 20px; margin-bottom: 20px;">
                        <div class="avatar" id="editAvatar" style="width: 80px; height: 80px;">U</div>
                        <button class="btn-secondary" onclick="primeMarApp.changeAvatar()">
                            Change Picture
                        </button>
                    </div>
                </div>
                
                <div class="profile-edit-section">
                    <label class="profile-edit-label">Cover Photo</label>
                    <div style="margin-bottom: 20px;">
                        <div id="bannerPreview" style="height: 150px; background: var(--gradient-primary); border-radius: 10px; margin-bottom: 15px;"></div>
                        <button class="btn-secondary w-100" onclick="primeMarApp.changeBanner()">
                            Change Cover Photo
                        </button>
                    </div>
                </div>
                
                <div class="profile-edit-section">
                    <label class="profile-edit-label">Name</label>
                    <input type="text" class="form-input mb-3" id="editName" placeholder="Your name">
                </div>
                
                <div class="profile-edit-section">
                    <label class="profile-edit-label">Username</label>
                    <input type="text" class="form-input mb-3" id="editUsername" placeholder="Username">
                </div>
                
                <div class="profile-edit-section">
                    <label class="profile-edit-label">Bio</label>
                    <textarea class="form-input mb-3" id="editBio" placeholder="Tell us about yourself" rows="4"></textarea>
                </div>
                
                <button class="btn w-100" onclick="primeMarApp.saveProfile()">
                    Save Changes
                </button>
            </div>
        </div>
    </div>

    <!-- Post Detail Modal -->
    <div class="modal-complete d-none" id="postDetailModal">
        <div class="modal-content">
            <div class="modal-header">
                <h3>Post</h3>
                <button class="close-btn" onclick="primeMarApp.closePostDetail()">&times;</button>
            </div>
            <div class="modal-body">
                <div id="postDetailContent">
                    <!-- Post content will be loaded here -->
                </div>
            </div>
        </div>
    </div>

    <!-- New Chat Modal -->
    <div class="modal-complete d-none" id="newChatModal">
        <div class="modal-content">
            <div class="modal-header">
                <h3>New Chat</h3>
                <button class="close-btn" onclick="primeMarApp.closeNewChat()">&times;</button>
            </div>
            <div class="modal-body">
                <input type="text" class="form-input mb-4" id="searchUserInput" placeholder="Search users...">
                <div id="searchUsersResults">
                    <!-- Users will be loaded here -->
                </div>
            </div>
        </div>
    </div>

    <!-- Analytics Modal -->
    <div class="modal-complete d-none" id="analyticsModal">
        <div class="modal-content">
            <div class="modal-header">
                <h3>Analytics Dashboard</h3>
                <button class="close-btn" onclick="primeMarApp.closeAnalytics()">&times;</button>
            </div>
            <div class="modal-body">
                <div style="display: grid; gap: 20px; margin-bottom: 20px;">
                    <div style="background: rgba(255,255,255,0.05); padding: 20px; border-radius: var(--border-radius-md);">
                        <h4 style="margin-bottom: 15px;">Engagement Overview</h4>
                        <div style="height: 200px;" id="engagementChart"></div>
                    </div>
                    <div style="background: rgba(255,255,255,0.05); padding: 20px; border-radius: var(--border-radius-md);">
                        <h4 style="margin-bottom: 15px;">Audience Growth</h4>
                        <div style="height: 200px;" id="growthChart"></div>
                    </div>
                </div>
                
                <div style="background: rgba(255,255,255,0.05); padding: 20px; border-radius: var(--border-radius-md);">
                    <h4 style="margin-bottom: 15px;">Top Performing Posts</h4>
                    <div id="topPostsList">
                        <!-- Top posts will be loaded here -->
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Story Viewer -->
    <div class="story-viewer d-none" id="storyViewer">
        <div class="story-progress-container" id="storyProgress"></div>
        <div class="story-content" id="storyContent"></div>
        <div class="close-story" onclick="primeMarApp.closeStory()">&times;</div>
    </div>

    <!-- Emoji Picker -->
    <div class="emoji-picker-complete d-none" id="globalEmojiPicker"></div>

    <!-- Reaction Picker -->
    <div class="reaction-container" id="reactionPicker">
        <span class="reaction-emoji" onclick="primeMarApp.react('')"></span>
        <span class="reaction-emoji" onclick="primeMarApp.react('')"></span>
        <span class="reaction-emoji" onclick="primeMarApp.react('')"></span>
        <span class="reaction-emoji" onclick="primeMarApp.react('')"></span>
        <span class="reaction-emoji" onclick="primeMarApp.react('')"></span>
        <span class="reaction-emoji" onclick="primeMarApp.react('')"></span>
    </div>

    <script>
    // PRIMEMAR PRO - COMPLETE SOCIAL MEDIA PLATFORM
    class PrimeMarPro {
        constructor() {
            // Configuration
            this.config = {
                supabaseUrl: 'https://mtqvgnkkzrqctapnxikg.supabase.co',
                supabaseKey: 'eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6Im10cXZnbmtrenJxY3RhcG54aWtnIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NjUyMzIwMTYsImV4cCI6MjA4MDgwODAxNn0.lJ9wNxHjvWejFI6q6-sh-CQ_3bKFM1S__6J7WZSG8dY',
                realtime: true,
                cacheEnabled: true,
                offlineMode: true,
                analytics: true,
                maxFileSize: 100 * 1024 * 1024
            };

            // State management
            this.state = {
                isOnline: navigator.onLine,
                isLoading: true,
                isDarkMode: localStorage.getItem('theme') !== 'light',
                isPlayingMusic: false,
                isRecording: false,
                isStreaming: false,
                activePage: 'homePage',
                currentUser: null,
                userProfile: null,
                posts: [],
                conversations: [],
                notifications: [],
                stories: [],
                uploadQueue: [],
                unreadNotifications: 0,
                unreadMessages: 0,
                mediaRecorder: null,
                audioChunks: [],
                recordingTimer: null,
                currentTrack: 0,
                tracks: [
                    { title: 'Chill Vibes', artist: 'LoFi Beats', cover: 'https://images.unsplash.com/photo-1493225457124-a3eb161ffa5f' },
                    { title: 'Summer Waves', artist: 'Beach Sounds', cover: 'https://images.unsplash.com/photo-1511379938547-c1f69419868d' },
                    { title: 'Focus Flow', artist: 'Study Music', cover: 'https://images.unsplash.com/photo-1518609878373-06d740f60d8b' }
                ]
            };

            // Cache system
            this.cache = new Map();
            
            // Initialize
            this.init();
        }

        async init() {
            try {
                this.showLoadingProgress(30);
                
                // Initialize Supabase
                this.supabase = window.supabase.createClient(
                    this.config.supabaseUrl,
                    this.config.supabaseKey,
                    {
                        realtime: { params: { eventsPerSecond: 10 } },
                        auth: { autoRefreshToken: true, persistSession: true }
                    }
                );

                this.showLoadingProgress(60);
                
                // Setup event listeners
                this.setupEventListeners();
                
                this.showLoadingProgress(80);
                
                // Check session
                await this.checkExistingSession();
                
                this.showLoadingProgress(100);
                
                setTimeout(() => this.hideLoadingScreen(), 1000);
                
            } catch (error) {
                console.error('Initialization error:', error);
                this.showError('loginError', 'Failed to initialize. Please refresh.');
                this.hideLoadingScreen();
            }
        }

        // ==================== AUTHENTICATION ====================
        async handleLogin() {
            const identifier = document.getElementById('loginEmail').value.trim();
            const password = document.getElementById('loginPassword').value.trim();
            const errorElement = document.getElementById('loginError');
            const loginBtn = document.getElementById('loginBtn');
            
            if (!identifier || !password) {
                this.showError(errorElement, 'Please enter credentials');
                return;
            }

            const originalText = loginBtn.innerHTML;
            loginBtn.innerHTML = '<span class="spinner"></span> Signing in...';
            loginBtn.disabled = true;

            try {
                let authData;
                if (identifier.includes('@')) {
                    authData = await this.supabase.auth.signInWithPassword({
                        email: identifier,
                        password: password
                    });
                } else {
                    const { data: profile } = await this.supabase
                        .from('profiles')
                        .select('email')
                        .eq('username', identifier)
                        .single();
                    
                    if (!profile) throw new Error('User not found');
                    
                    authData = await this.supabase.auth.signInWithPassword({
                        email: profile.email,
                        password: password
                    });
                }

                if (authData.error) throw authData.error;

                this.state.currentUser = authData.data.user;
                await this.loadUserProfile();
                this.showToast('Welcome back! ', 'success');
                this.showApp();
                await this.loadAllData();
                this.fireConfetti();

            } catch (error) {
                console.error('Login error:', error);
                this.showError(errorElement, error.message);
            } finally {
                loginBtn.innerHTML = originalText;
                loginBtn.disabled = false;
            }
        }

        async handleSignup() {
            const name = document.getElementById('signupName').value.trim();
            const username = document.getElementById('signupUsername').value.trim();
            const email = document.getElementById('signupEmail').value.trim();
            const password = document.getElementById('signupPassword').value.trim();
            const confirmPassword = document.getElementById('signupConfirmPassword').value.trim();
            const acceptTerms = document.getElementById('acceptTerms').checked;
            const errorElement = document.getElementById('signupError');
            const signupBtn = document.getElementById('signupBtn');
            
            // Validation
            if (!name || !username || !email || !password || !confirmPassword) {
                this.showError(errorElement, 'All fields are required');
                return;
            }

            if (!acceptTerms) {
                this.showError(errorElement, 'Please accept terms');
                return;
            }

            if (password !== confirmPassword) {
                this.showError(errorElement, 'Passwords do not match');
                return;
            }

            if (password.length < 8) {
                this.showError(errorElement, 'Password must be 8+ characters');
                return;
            }

            if (!this.validatePassword(password)) {
                this.showError(errorElement, 'Include letters and numbers');
                return;
            }

            if (!this.validateUsername(username)) {
                this.showError(errorElement, 'Invalid username format');
                return;
            }

            const originalText = signupBtn.innerHTML;
            signupBtn.innerHTML = '<span class="spinner"></span> Creating account...';
            signupBtn.disabled = true;

            try {
                // Check username
                const { data: existing } = await this.supabase
                    .from('profiles')
                    .select('username')
                    .eq('username', username)
                    .single();

                if (existing) throw new Error('Username taken');

                // Create account
                const { data: authData, error } = await this.supabase.auth.signUp({
                    email,
                    password,
                    options: {
                        data: { full_name: name, username }
                    }
                });

                if (error) throw error;

                // Create profile
                await this.createUserProfile(name, username, email, authData.user.id);

                this.showToast('Account created! ', 'success');
                this.showLoginForm();

            } catch (error) {
                console.error('Signup error:', error);
                this.showError(errorElement, error.message);
            } finally {
                signupBtn.innerHTML = originalText;
                signupBtn.disabled = false;
            }
        }

        validatePassword(password) {
            const hasLetter = /[a-zA-Z]/.test(password);
            const hasNumber = /\d/.test(password);
            return hasLetter && hasNumber;
        }

        validateUsername(username) {
            return /^[a-zA-Z0-9_]+$/.test(username);
        }

        async createUserProfile(name, username, email, userId) {
            const profile = {
                id: userId,
                name,
                username,
                email,
                bio: 'Welcome to my PrimeMar profile!',
                avatar: `https://ui-avatars.com/api/?name=${encodeURIComponent(name)}&background=ff6b35&color=fff&size=256`,
                banner_color: this.getRandomGradient(),
                created_at: new Date().toISOString(),
                updated_at: new Date().toISOString()
            };

            await this.supabase.from('profiles').insert([profile]);
        }

        getRandomGradient() {
            const gradients = [
                'linear-gradient(135deg, #FF6B35, #FF3864)',
                'linear-gradient(135deg, #F7C948, #FF6B35)',
                'linear-gradient(135deg, #2ECC71, #3498DB)',
                'linear-gradient(135deg, #9B59B6, #3498DB)'
            ];
            return gradients[Math.floor(Math.random() * gradients.length)];
        }

        // ==================== ENHANCED POST SYSTEM ====================
        async createPostAdvanced() {
            const content = document.getElementById('postTextarea').value.trim();
            const media = this.state.uploadQueue;
            const poll = document.getElementById('pollEditor').classList.contains('d-none') ? null : {
                question: document.getElementById('pollQuestion').value,
                options: Array.from(document.querySelectorAll('.poll-option-input')).map(input => input.value)
            };

            if (!content && media.length === 0 && !poll) {
                this.showToast('Please add content', 'error');
                return;
            }

            try {
                // Upload media
                const mediaUrls = [];
                for (const file of media) {
                    const url = await this.uploadFile(file);
                    mediaUrls.push(url);
                }

                // Create post
                const postData = {
                    author_id: this.state.currentUser.id,
                    content,
                    media: mediaUrls,
                    poll,
                    hashtags: this.extractHashtags(content),
                    mentions: this.extractMentions(content),
                    created_at: new Date().toISOString()
                };

                const { data: post, error } = await this.supabase
                    .from('posts')
                    .insert([postData])
                    .select(`
                        *,
                        profiles:author_id (*)
                    `)
                    .single();

                if (error) throw error;

                // Clear composer
                this.clearPostComposer();
                
                // Add to feed
                this.renderPostAdvanced(post);
                
                this.showToast('Post published! ', 'success');
                this.fireConfetti();

            } catch (error) {
                console.error('Post error:', error);
                this.showToast('Failed to post', 'error');
            }
        }

        extractHashtags(content) {
            const hashtags = content.match(/#[a-zA-Z0-9_]+/g);
            return hashtags ? hashtags.map(tag => tag.substring(1)) : [];
        }

        extractMentions(content) {
            const mentions = content.match(/@[a-zA-Z0-9_]+/g);
            return mentions ? mentions.map(mention => mention.substring(1)) : [];
        }

        renderPostAdvanced(post) {
            const feed = document.getElementById('postFeed');
            const element = this.createPostElementAdvanced(post);
            feed.prepend(element);
        }

        createPostElementAdvanced(post) {
            const md = window.markdownit();
            const contentHtml = md.render(post.content || '');
            
            return `
                <div class="post-card" id="post-${post.id}">
                    <div class="post-header">
                        <div class="avatar cursor-pointer" onclick="primeMarApp.viewProfile('${post.author_id}')">
                            ${post.profiles?.name?.charAt(0) || 'U'}
                        </div>
                        <div class="post-user-info">
                            <div class="post-user-name" onclick="primeMarApp.viewProfile('${post.author_id}')">
                                ${post.profiles?.name || 'User'}
                            </div>
                            <div class="post-user-handle" onclick="primeMarApp.viewProfile('${post.author_id}')">
                                @${post.profiles?.username || 'user'}
                            </div>
                        </div>
                        <div class="post-time">${this.formatTimeAgo(post.created_at)}</div>
                    </div>
                    <div class="markdown-content post-content">
                        ${contentHtml}
                    </div>
                    
                    ${post.media && post.media.length > 0 ? `
                        <div class="image-gallery mb-3">
                            ${post.media.map(url => `
                                <div class="image-preview">
                                    <img src="${url}" alt="Post media" onclick="primeMarApp.viewMedia('${url}')">
                                </div>
                            `).join('')}
                        </div>
                    ` : ''}
                    
                    ${post.poll ? this.renderPollElement(post.poll) : ''}
                    
                    <div class="post-actions">
                        <button class="post-action-btn" onclick="primeMarApp.likePost('${post.id}')">
                            <i class="fas fa-heart"></i>
                            <span id="like-count-${post.id}">${post.likes_count || 0}</span>
                        </button>
                        <button class="post-action-btn" onclick="primeMarApp.showComments('${post.id}')">
                            <i class="fas fa-comment"></i>
                            <span>${post.comments_count || 0}</span>
                        </button>
                        <button class="post-action-btn" onclick="primeMarApp.showReactions('${post.id}')">
                            <i class="fas fa-smile"></i>
                        </button>
                        <button class="post-action-btn" onclick="primeMarApp.sharePost('${post.id}')">
                            <i class="fas fa-share"></i>
                        </button>
                    </div>
                </div>
            `;
        }

        renderPollElement(poll) {
            return `
                <div class="poll-editor mb-3">
                    <h4>${poll.question}</h4>
                    ${poll.options.map((option, index) => `
                        <div class="poll-option-editor">
                            <input type="radio" name="poll-${poll.id}" id="poll-${poll.id}-${index}">
                            <label for="poll-${poll.id}-${index}" style="flex: 1;">${option}</label>
                        </div>
                    `).join('')}
                </div>
            `;
        }

        // ==================== STORY SYSTEM ====================
        async createStory() {
            const input = document.createElement('input');
            input.type = 'file';
            input.accept = 'image/*,video/*';
            input.onchange = async (e) => {
                const file = e.target.files[0];
                if (!file) return;

                try {
                    this.showToast('Creating story...', 'info');
                    
                    // Upload file
                    const url = await this.uploadFile(file);
                    
                    // Create story record
                    const storyData = {
                        user_id: this.state.currentUser.id,
                        media_url: url,
                        type: file.type.startsWith('image/') ? 'image' : 'video',
                        expires_at: new Date(Date.now() + 24 * 60 * 60 * 1000).toISOString(),
                        created_at: new Date().toISOString()
                    };

                    const { data: story, error } = await this.supabase
                        .from('stories')
                        .insert([storyData])
                        .select()
                        .single();

                    if (error) throw error;

                    // Add to stories
                    this.state.stories.unshift(story);
                    this.renderStories();
                    
                    this.showToast('Story created! ', 'success');

                } catch (error) {
                    console.error('Story error:', error);
                    this.showToast('Failed to create story', 'error');
                }
            };
            input.click();
        }

        renderStories() {
            const container = document.getElementById('storiesCarousel');
            if (!container) return;

            const storiesHTML = this.state.stories.map(story => `
                <div class="story-item" onclick="primeMarApp.viewStory('${story.id}')">
                    <div class="story-content">
                        ${story.type === 'image' ? 
                            `<img src="${story.media_url}" style="width: 100%; height: 100%; object-fit: cover;">` :
                            `<i class="fas fa-play"></i>`
                        }
                    </div>
                </div>
            `).join('');

            container.innerHTML = storiesHTML;
        }

        // ==================== VOICE FEATURES ====================
        async startVoiceRecording() {
            try {
                if (!navigator.mediaDevices || !navigator.mediaDevices.getUserMedia) {
                    throw new Error('Microphone not available');
                }

                const stream = await navigator.mediaDevices.getUserMedia({ audio: true });
                this.state.mediaRecorder = new MediaRecorder(stream);
                this.state.audioChunks = [];

                this.state.mediaRecorder.ondataavailable = (event) => {
                    this.state.audioChunks.push(event.data);
                };

                this.state.mediaRecorder.onstop = async () => {
                    const audioBlob = new Blob(this.state.audioChunks, { type: 'audio/webm' });
                    await this.processVoiceRecording(audioBlob);
                };

                this.state.mediaRecorder.start();
                this.state.isRecording = true;
                this.startRecordingTimer();
                
                this.showModal('voiceRecorderModal');

            } catch (error) {
                console.error('Recording error:', error);
                this.showToast('Microphone access denied', 'error');
            }
        }

        async processVoiceRecording(audioBlob) {
            try {
                // Create FormData
                const formData = new FormData();
                formData.append('audio', audioBlob, 'recording.webm');
                
                // Upload to Supabase storage
                const filePath = `voice_notes/${Date.now()}.webm`;
                const { data, error } = await this.supabase.storage
                    .from('media')
                    .upload(filePath, audioBlob);
                
                if (error) throw error;
                
                // Get public URL
                const { data: { publicUrl } } = this.supabase.storage
                    .from('media')
                    .getPublicUrl(filePath);
                
                // Send as message
                if (this.state.activeChat) {
                    await this.sendVoiceMessage(this.state.activeChat, publicUrl);
                }
                
                this.showToast('Voice message sent! ', 'success');
                this.closeModal('voiceRecorderModal');
                
            } catch (error) {
                console.error('Voice processing error:', error);
                this.showToast('Failed to process voice', 'error');
            }
        }

        startRecordingTimer() {
            let seconds = 0;
            const timerElement = document.getElementById('recordingTimer');
            
            this.state.recordingTimer = setInterval(() => {
                seconds++;
                const mins = Math.floor(seconds / 60).toString().padStart(2, '0');
                const secs = (seconds % 60).toString().padStart(2, '0');
                timerElement.textContent = `${mins}:${secs}`;
            }, 1000);
        }

        // ==================== LIVE STREAMING ====================
        async startLiveStream() {
            try {
                if (!navigator.mediaDevices || !navigator.mediaDevices.getUserMedia) {
                    throw new Error('Browser not supported');
                }

                this.state.stream = await navigator.mediaDevices.getUserMedia({
                    video: {
                        width: { ideal: 1280 },
                        height: { ideal: 720 },
                        frameRate: { ideal: 30 }
                    },
                    audio: true
                });

                const video = document.getElementById('liveStreamVideo');
                video.srcObject = this.state.stream;
                video.play();

                this.showModal('liveStreamModal');

            } catch (error) {
                console.error('Stream error:', error);
                this.showToast('Failed to access camera', 'error');
            }
        }

        async startStream() {
            try {
                const title = document.getElementById('streamTitle').value;
                const description = document.getElementById('streamDescription').value;
                const category = document.getElementById('streamCategory').value;

                if (!title) {
                    this.showToast('Enter stream title', 'error');
                    return;
                }

                // Create stream record
                const streamData = {
                    user_id: this.state.currentUser.id,
                    title,
                    description,
                    category,
                    status: 'live',
                    viewers: 0,
                    started_at: new Date().toISOString()
                };

                const { data: stream, error } = await this.supabase
                    .from('streams')
                    .insert([streamData])
                    .select()
                    .single();

                if (error) throw error;

                this.state.isStreaming = true;
                this.state.activeStream = stream;

                this.showToast('Stream started! ', 'success');
                this.closeModal('liveStreamModal');

            } catch (error) {
                console.error('Stream start error:', error);
                this.showToast('Failed to start stream', 'error');
            }
        }

        // ==================== MUSIC PLAYER ====================
        togglePlay() {
            const audioPlayer = this.state.audioPlayer;
            const playBtn = document.getElementById('playBtn');
            
            if (!audioPlayer.src && this.state.tracks.length > 0) {
                audioPlayer.src = 'https://example.com/audio.mp3'; // Placeholder
            }
            
            if (this.state.isPlayingMusic) {
                audioPlayer.pause();
                playBtn.innerHTML = '<i class="fas fa-play"></i>';
            } else {
                audioPlayer.play();
                playBtn.innerHTML = '<i class="fas fa-pause"></i>';
            }
            
            this.state.isPlayingMusic = !this.state.isPlayingMusic;
        }

        toggleMute() {
            const audioPlayer = this.state.audioPlayer;
            const muteBtn = document.getElementById('muteBtn');
            
            audioPlayer.muted = !audioPlayer.muted;
            muteBtn.innerHTML = audioPlayer.muted ? 
                '<i class="fas fa-volume-mute"></i>' : 
                '<i class="fas fa-volume-up"></i>';
        }

        nextTrack() {
            this.state.currentTrack = (this.state.currentTrack + 1) % this.state.tracks.length;
            this.updateMusicPlayer();
        }

        prevTrack() {
            this.state.currentTrack = (this.state.currentTrack - 1 + this.state.tracks.length) % this.state.tracks.length;
            this.updateMusicPlayer();
        }

        updateMusicPlayer() {
            const track = this.state.tracks[this.state.currentTrack];
            document.getElementById('musicTitle').textContent = track.title;
            document.getElementById('musicArtist').textContent = track.artist;
            document.getElementById('musicCover').src = track.cover;
            
            const musicPlayer = document.getElementById('musicPlayer');
            musicPlayer.classList.remove('d-none');
        }

        // ==================== SEARCH SYSTEM ====================
        async performSearch(query) {
            if (!query.trim()) {
                this.hideSearchResults();
                return;
            }

            try {
                // Search users
                const { data: users } = await this.supabase
                    .from('profiles')
                    .select('*')
                    .or(`username.ilike.%${query}%,name.ilike.%${query}%`)
                    .limit(5);

                // Search posts
                const { data: posts } = await this.supabase
                    .from('posts')
                    .select('*, profiles:author_id(*)')
                    .ilike('content', `%${query}%`)
                    .limit(5);

                this.renderSearchResults({ users, posts });
                this.showSearchResults();

            } catch (error) {
                console.error('Search error:', error);
            }
        }

        renderSearchResults(results) {
            const container = document.getElementById('searchResults');
            let html = '';

            if (results.users && results.users.length > 0) {
                html += '<h4 style="margin-bottom: 10px;">Users</h4>';
                html += results.users.map(user => `
                    <div style="display: flex; align-items: center; gap: 10px; padding: 10px; cursor: pointer; border-radius: var(--border-radius-sm); transition: background var(--transition-normal);"
                         onmouseover="this.style.background='rgba(255,255,255,0.1)'"
                         onmouseout="this.style.background='transparent'"
                         onclick="primeMarApp.viewProfile('${user.id}')">
                        <div class="avatar">${user.name.charAt(0)}</div>
                        <div>
                            <div style="font-weight: bold;">${user.name}</div>
                            <div style="font-size: 12px; color: var(--secondary-color);">@${user.username}</div>
                        </div>
                    </div>
                `).join('');
            }

            if (results.posts && results.posts.length > 0) {
                html += '<h4 style="margin-top: 20px; margin-bottom: 10px;">Posts</h4>';
                html += results.posts.map(post => `
                    <div style="padding: 10px; cursor: pointer; border-radius: var(--border-radius-sm); transition: background var(--transition-normal);"
                         onmouseover="this.style.background='rgba(255,255,255,0.1)'"
                         onmouseout="this.style.background='transparent'"
                         onclick="primeMarApp.viewPost('${post.id}')">
                        <div style="display: flex; align-items: center; gap: 10px; margin-bottom: 5px;">
                            <div class="avatar" style="width: 30px; height: 30px;">${post.profiles?.name?.charAt(0) || 'U'}</div>
                            <div style="font-weight: bold;">${post.profiles?.name || 'User'}</div>
                        </div>
                        <div style="font-size: 14px; overflow: hidden; text-overflow: ellipsis; display: -webkit-box; -webkit-line-clamp: 2; -webkit-box-orient: vertical;">
                            ${post.content.substring(0, 100)}${post.content.length > 100 ? '...' : ''}
                        </div>
                    </div>
                `).join('');
            }

            if (!html) {
                html = '<div style="padding: 20px; text-align: center; color: var(--secondary-color);">No results found</div>';
            }

            container.innerHTML = html;
        }

        showSearchResults() {
            document.getElementById('searchResults').classList.remove('d-none');
        }

        hideSearchResults() {
            document.getElementById('searchResults').classList.add('d-none');
        }

        // ==================== REACTION SYSTEM ====================
        react(emoji) {
            this.showToast(`Reacted with ${emoji}`, 'success');
            this.hideReactions();
        }

        showReactions(postId) {
            const picker = document.getElementById('reactionPicker');
            picker.classList.add('active');
            
            setTimeout(() => {
                picker.classList.remove('active');
            }, 2000);
        }

        hideReactions() {
            document.getElementById('reactionPicker').classList.remove('active');
        }

        // ==================== EMOJI PICKER ====================
        toggleEmojiPicker(context) {
            const picker = document.getElementById('globalEmojiPicker');
            picker.classList.toggle('d-none');
            
            if (!picker.classList.contains('d-none')) {
                this.renderEmojiPicker(context);
            }
        }

        renderEmojiPicker(context) {
            const picker = document.getElementById('globalEmojiPicker');
            const emojis = ['', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', ''];
            
            picker.innerHTML = emojis.map(emoji => `
                <span onclick="primeMarApp.insertEmoji('${emoji}', '${context}')">${emoji}</span>
            `).join('');
        }

        insertEmoji(emoji, context) {
            if (context === 'post') {
                const textarea = document.getElementById('postTextarea');
                textarea.value += emoji;
                textarea.focus();
            } else if (context === 'chat') {
                const input = document.getElementById('messageInput');
                input.value += emoji;
                input.focus();
            }
            this.toggleEmojiPicker(context);
        }

        // ==================== OFFLINE SUPPORT ====================
        async syncOfflineData() {
            if (!this.state.isOnline) return;

            try {
                const pendingPosts = JSON.parse(localStorage.getItem('pendingPosts') || '[]');
                for (const post of pendingPosts) {
                    await this.supabase.from('posts').insert([post]);
                }
                localStorage.removeItem('pendingPosts');

                this.showToast('Synced offline data', 'success');

            } catch (error) {
                console.error('Sync error:', error);
            }
        }

        // ==================== UTILITY METHODS ====================
        showLoadingProgress(percent) {
            const progressBar = document.getElementById('loadingProgress');
            if (progressBar) {
                progressBar.style.width = percent + '%';
            }
        }

        hideLoadingScreen() {
            const loadingScreen = document.getElementById('loadingScreen');
            if (loadingScreen) {
                loadingScreen.classList.add('hidden');
                setTimeout(() => {
                    loadingScreen.style.display = 'none';
                }, 500);
            }
        }

        async checkExistingSession() {
            try {
                const { data: { session }, error } = await this.supabase.auth.getSession();
                
                if (error) {
                    console.error('Session check error:', error);
                    this.showAuth();
                    return;
                }
                
                if (session) {
                    this.state.currentUser = session.user;
                    await this.loadUserProfile();
                    this.showApp();
                    await this.loadAllData();
                } else {
                    this.showAuth();
                }
                
            } catch (error) {
                console.error('Session check error:', error);
                this.showAuth();
            }
        }

        async loadUserProfile() {
            if (!this.state.currentUser) return;
            
            try {
                const { data: profile, error } = await this.supabase
                    .from('profiles')
                    .select('*')
                    .eq('id', this.state.currentUser.id)
                    .single();
                
                if (error) {
                    console.log('Creating default profile...');
                    this.state.userProfile = {
                        id: this.state.currentUser.id,
                        name: this.state.currentUser.user_metadata?.full_name || 'User',
                        username: this.state.currentUser.user_metadata?.username || 'user' + Math.random().toString(36).substr(2, 5),
                        email: this.state.currentUser.email,
                        bio: 'Welcome to my PrimeMar profile!',
                        avatar: `https://ui-avatars.com/api/?name=${encodeURIComponent(this.state.currentUser.user_metadata?.full_name || 'User')}&background=ff6b35&color=fff&size=256`,
                        banner_color: this.getRandomGradient()
                    };
                    
                    await this.supabase.from('profiles').insert([this.state.userProfile]);
                } else {
                    this.state.userProfile = profile;
                }
                
                this.updateProfileUI();
                
            } catch (error) {
                console.error('Error loading profile:', error);
                this.state.userProfile = {
                    id: this.state.currentUser.id,
                    name: this.state.currentUser.user_metadata?.full_name || 'User',
                    username: this.state.currentUser.user_metadata?.username || 'user' + Math.random().toString(36).substr(2, 5),
                    email: this.state.currentUser.email,
                    bio: 'Welcome to my PrimeMar profile!',
                    avatar: `https://ui-avatars.com/api/?name=${encodeURIComponent(this.state.currentUser.user_metadata?.full_name || 'User')}&background=ff6b35&color=fff&size=256`,
                    banner_color: this.getRandomGradient()
                };
                
                this.updateProfileUI();
            }
        }

        updateProfileUI() {
            if (!this.state.userProfile) return;
            
            // Update profile elements
            const avatarElements = document.querySelectorAll('.avatar, .profile-avatar, #userAvatar, #editAvatar');
            const nameElements = document.querySelectorAll('#profileName');
            const handleElement = document.getElementById('profileHandle');
            const bioElement = document.getElementById('profileBio');
            const banner = document.querySelector('.profile-banner');
            
            avatarElements.forEach(el => {
                if (el.id === 'profileAvatar' || el.id === 'composerAvatar' || el.id === 'userAvatar' || el.id === 'editAvatar') {
                    el.textContent = this.state.userProfile.name.charAt(0).toUpperCase();
                }
            });
            
            nameElements.forEach(el => {
                el.textContent = this.state.userProfile.name;
            });
            
            if (handleElement) {
                handleElement.textContent = '@' + this.state.userProfile.username;
            }
            
            if (bioElement) {
                bioElement.textContent = this.state.userProfile.bio;
            }
            
            if (banner && this.state.userProfile.banner_color) {
                banner.style.background = this.state.userProfile.banner_color;
            }
        }

        async loadAllData() {
            try {
                await Promise.all([
                    this.loadPosts(),
                    this.loadConversations(),
                    this.loadNotifications(),
                    this.loadProfileStats(),
                    this.loadStories(),
                    this.loadTrending()
                ]);
                
            } catch (error) {
                console.error('Error loading data:', error);
            }
        }

        async loadPosts() {
            try {
                const { data: posts, error } = await this.supabase
                    .from('posts')
                    .select(`
                        *,
                        profiles:author_id (*)
                    `)
                    .order('created_at', { ascending: false })
                    .limit(20);
                
                if (error) throw error;
                
                this.state.posts = posts || [];
                this.renderPostsAdvanced();
                
            } catch (error) {
                console.error('Error loading posts:', error);
                this.state.posts = [];
                this.renderPostsAdvanced();
            }
        }

        renderPostsAdvanced() {
            const feed = document.getElementById('postFeed');
            const profileFeed = document.getElementById('profilePostsFeed');
            
            if (!this.state.posts || this.state.posts.length === 0) {
                const emptyMessage = `
                    <div style="text-align: center; padding: 40px; color: var(--secondary-color);">
                        <i class="fas fa-feather" style="font-size: 3em; margin-bottom: 20px; opacity: 0.5;"></i>
                        <h3 style="margin-bottom: 10px;">No posts yet</h3>
                        <p>Be the first to share something!</p>
                    </div>
                `;
                
                if (feed) feed.innerHTML = emptyMessage;
                if (profileFeed) profileFeed.innerHTML = emptyMessage;
                return;
            }
            
            const postsHTML = this.state.posts.map(post => this.createPostElementAdvanced(post)).join('');
            
            if (feed) feed.innerHTML = postsHTML;
            if (profileFeed) profileFeed.innerHTML = postsHTML;
        }

        formatTimeAgo(timestamp) {
            if (!timestamp) return 'just now';
            
            const now = new Date();
            const time = new Date(timestamp);
            const diff = now - time;
            const seconds = Math.floor(diff / 1000);
            const minutes = Math.floor(seconds / 60);
            const hours = Math.floor(minutes / 60);
            const days = Math.floor(hours / 24);

            if (seconds < 60) return 'just now';
            if (minutes < 60) return `${minutes}m ago`;
            if (hours < 24) return `${hours}h ago`;
            if (days < 7) return `${days}d ago`;
            return time.toLocaleDateString();
        }

        async loadProfileStats() {
            try {
                if (!this.state.currentUser) return;
                
                // Get posts count
                const { count: postsCount } = await this.supabase
                    .from('posts')
                    .select('*', { count: 'exact', head: true })
                    .eq('author_id', this.state.currentUser.id);
                
                // Update UI
                document.getElementById('postsCount').textContent = postsCount || 0;
                document.getElementById('followersCount').textContent = '0';
                document.getElementById('followingCount').textContent = '0';
                document.getElementById('likesCount').textContent = '0';
                
            } catch (error) {
                console.error('Error loading profile stats:', error);
            }
        }

        async logout() {
            try {
                await this.supabase.auth.signOut();
                
                this.state.currentUser = null;
                this.state.userProfile = null;
                this.state.posts = [];
                this.state.conversations = [];
                this.state.notifications = [];
                
                this.showAuth();
                this.showLoginForm();
                
                this.showToast('Logged out successfully', 'info');
                
            } catch (error) {
                console.error('Logout error:', error);
                this.showToast('Logout failed', 'error');
            }
        }

        showAuth() {
            const authModal = document.getElementById('authModal');
            const appContainer = document.getElementById('appContainer');
            
            if (authModal) {
                authModal.classList.remove('hidden');
                authModal.style.display = 'flex';
            }
            
            if (appContainer) {
                appContainer.classList.remove('active');
            }
        }

        showApp() {
            const authModal = document.getElementById('authModal');
            const appContainer = document.getElementById('appContainer');
            
            if (authModal) {
                authModal.classList.add('hidden');
                setTimeout(() => {
                    authModal.style.display = 'none';
                }, 300);
            }
            
            if (appContainer) {
                appContainer.classList.add('active');
            }
            
            this.updateProfileUI();
        }

        showLoginForm() {
            document.getElementById('loginForm').style.display = 'block';
            document.getElementById('signupForm').classList.add('d-none');
            document.getElementById('forgotPasswordForm').classList.add('d-none');
            
            document.getElementById('loginError').classList.remove('show');
            document.getElementById('signupError').classList.remove('show');
            
            document.getElementById('loginEmail').value = '';
            document.getElementById('loginPassword').value = '';
        }

        showSignupForm() {
            document.getElementById('loginForm').style.display = 'none';
            document.getElementById('signupForm').classList.remove('d-none');
            document.getElementById('forgotPasswordForm').classList.add('d-none');
            
            document.getElementById('loginError').classList.remove('show');
            document.getElementById('signupError').classList.remove('show');
        }

        showForgotPassword() {
            document.getElementById('loginForm').style.display = 'none';
            document.getElementById('signupForm').classList.add('d-none');
            document.getElementById('forgotPasswordForm').classList.remove('d-none');
        }

        showError(elementId, message) {
            const element = document.getElementById(elementId);
            if (element) {
                element.textContent = message;
                element.classList.add('show');
                
                setTimeout(() => {
                    element.classList.remove('show');
                }, 5000);
            }
        }

        showToast(message, type = 'info') {
            const toast = document.createElement('div');
            toast.className = `toast ${type}`;
            
            let icon = '';
            if (type === 'success') icon = '';
            if (type === 'error') icon = '';
            
            toast.innerHTML = `${icon} ${message}`;
            
            const container = document.getElementById('toastContainer');
            container.appendChild(toast);
            
            setTimeout(() => {
                toast.classList.add('show');
            }, 10);
            
            setTimeout(() => {
                toast.classList.remove('show');
                setTimeout(() => {
                    if (toast.parentNode) {
                        toast.parentNode.removeChild(toast);
                    }
                }, 300);
            }, 3000);
        }

        showPage(pageId) {
            document.querySelectorAll('.page').forEach(page => {
                page.classList.remove('active');
            });
            
            const page = document.getElementById(pageId);
            if (page) {
                page.classList.add('active');
            }
            
            document.querySelectorAll('.nav-item').forEach(nav => {
                nav.classList.remove('active');
                if (nav.dataset.page === pageId) {
                    nav.classList.add('active');
                }
            });
            
            this.state.activePage = pageId;
            this.loadPageData(pageId);
        }

        loadPageData(pageId) {
            switch(pageId) {
                case 'homePage':
                    this.loadPosts();
                    break;
                case 'profilePage':
                    this.loadProfileStats();
                    break;
                case 'messagesPage':
                    this.loadConversations();
                    break;
                case 'notificationsPage':
                    this.loadNotifications();
                    break;
            }
        }

        toggleQuickActions() {
            const actions = document.getElementById('quickActions');
            actions.classList.toggle('show');
            
            const fab = document.getElementById('fabBtn');
            fab.innerHTML = actions.classList.contains('show') ? 
                '<i class="fas fa-times"></i>' : 
                '<i class="fas fa-plus"></i>';
        }

        createPostQuick() {
            document.getElementById('postTextarea').focus();
            this.showToast('Start typing your post...', 'info');
        }

        // ==================== MODAL SYSTEM ====================
        showModal(id) {
            document.getElementById(id).classList.remove('d-none');
        }

        closeModal(id) {
            document.getElementById(id).classList.add('d-none');
        }

        toggleTheme() {
            this.state.isDarkMode = !this.state.isDarkMode;
            
            if (this.state.isDarkMode) {
                document.body.classList.remove('light-mode');
                localStorage.setItem('theme', 'dark');
                this.showToast('Dark mode enabled', 'info');
            } else {
                document.body.classList.add('light-mode');
                localStorage.setItem('theme', 'light');
                this.showToast('Light mode enabled', 'info');
            }
        }

        toggleProfileDropdown() {
            const dropdown = document.getElementById('profileDropdown');
            dropdown.classList.toggle('d-none');
        }

        hideProfileDropdown() {
            document.getElementById('profileDropdown').classList.add('d-none');
        }

        // ==================== FILE UPLOAD ====================
        async uploadFile(file) {
            return new Promise((resolve, reject) => {
                // In a real app, you would upload to Supabase Storage
                // For now, we'll simulate a URL
                setTimeout(() => {
                    const url = URL.createObjectURL(file);
                    resolve(url);
                }, 1000);
            });
        }

        clearPostComposer() {
            document.getElementById('postTextarea').value = '';
            document.getElementById('mediaPreview').innerHTML = '';
            document.getElementById('uploadZone').classList.add('d-none');
            document.getElementById('pollEditor').classList.add('d-none');
            document.getElementById('pollQuestion').value = '';
            document.getElementById('pollOptions').innerHTML = `
                <div class="poll-option-editor">
                    <input type="text" class="poll-option-input" placeholder="Option 1">
                    <button class="action-btn" style="color: var(--accent-color);" onclick="this.parentElement.remove()">
                        <i class="fas fa-times"></i>
                    </button>
                </div>
                <div class="poll-option-editor">
                    <input type="text" class="poll-option-input" placeholder="Option 2">
                    <button class="action-btn" style="color: var(--accent-color);" onclick="this.parentElement.remove()">
                        <i class="fas fa-times"></i>
                    </button>
                </div>
            `;
            this.state.uploadQueue = [];
            document.getElementById('postBtn').disabled = true;
        }

        addPollOption() {
            const optionsContainer = document.getElementById('pollOptions');
            const optionCount = optionsContainer.children.length + 1;
            const newOption = document.createElement('div');
            newOption.className = 'poll-option-editor';
            newOption.innerHTML = `
                <input type="text" class="poll-option-input" placeholder="Option ${optionCount}">
                <button class="action-btn" style="color: var(--accent-color);" onclick="this.parentElement.remove()">
                    <i class="fas fa-times"></i>
                </button>
            `;
            optionsContainer.appendChild(newOption);
        }

        // ==================== NETWORK STATUS ====================
        updateNetworkStatus() {
            const status = document.getElementById('connectionStatus');
            const offlineBanner = document.getElementById('offlineBanner');
            
            if (this.state.isOnline) {
                status.textContent = 'Online';
                status.classList.remove('offline');
                status.classList.add('show');
                offlineBanner.classList.remove('active');
                
                setTimeout(() => {
                    status.classList.remove('show');
                }, 3000);
            } else {
                status.textContent = 'Offline';
                status.classList.add('offline', 'show');
                offlineBanner.classList.add('active');
            }
        }

        // ==================== CONFETTI EFFECT ====================
        fireConfetti() {
            const container = document.getElementById('confettiContainer');
            for (let i = 0; i < 100; i++) {
                const confetti = document.createElement('div');
                confetti.className = 'confetti';
                confetti.style.left = Math.random() * 100 + 'vw';
                confetti.style.backgroundColor = this.getRandomColor();
                confetti.style.width = Math.random() * 10 + 5 + 'px';
                confetti.style.height = Math.random() * 10 + 5 + 'px';
                
                container.appendChild(confetti);
                
                confetti.animate([
                    { transform: 'translateY(0) rotate(0deg)', opacity: 1 },
                    { transform: `translateY(100vh) rotate(${Math.random() * 360}deg)`, opacity: 0 }
                ], {
                    duration: Math.random() * 3000 + 2000,
                    easing: 'cubic-bezier(0.215, 0.610, 0.355, 1)'
                });
                
                setTimeout(() => confetti.remove(), 5000);
            }
        }

        getRandomColor() {
            const colors = ['#FF6B35', '#F7C948', '#FF3864', '#2ECC71', '#3498DB', '#9B59B6'];
            return colors[Math.floor(Math.random() * colors.length)];
        }

        // ==================== EVENT LISTENERS ====================
        setupEventListeners() {
            // Network events
            window.addEventListener('online', () => {
                this.state.isOnline = true;
                this.updateNetworkStatus();
                this.syncOfflineData();
            });
            
            window.addEventListener('offline', () => {
                this.state.isOnline = false;
                this.updateNetworkStatus();
            });
            
            // Auth events
            document.getElementById('loginBtn')?.addEventListener('click', () => this.handleLogin());
            document.getElementById('signupBtn')?.addEventListener('click', () => this.handleSignup());
            document.getElementById('loginPassword')?.addEventListener('keypress', (e) => {
                if (e.key === 'Enter') this.handleLogin();
            });
            
            // Navigation
            document.querySelectorAll('.nav-item').forEach(nav => {
                nav.addEventListener('click', () => {
                    const pageId = nav.getAttribute('data-page');
                    this.showPage(pageId);
                });
            });
            
            // Profile dropdown
            document.getElementById('profileBtn')?.addEventListener('click', (e) => {
                e.stopPropagation();
                this.toggleProfileDropdown();
            });
            
            document.addEventListener('click', () => {
                this.hideProfileDropdown();
            });
            
            // Theme toggle
            document.getElementById('themeToggle')?.addEventListener('click', () => {
                this.toggleTheme();
            });
            
            // Post composer
            document.getElementById('postTextarea')?.addEventListener('input', () => {
                const content = document.getElementById('postTextarea').value.trim();
                document.getElementById('postBtn').disabled = !content && this.state.uploadQueue.length === 0;
            });
            
            // Search
            document.getElementById('searchInput')?.addEventListener('input', (e) => {
                this.performSearch(e.target.value);
            });
            
            // Chat
            document.getElementById('messageInput')?.addEventListener('keypress', (e) => {
                if (e.key === 'Enter') this.sendMessage();
            });
            
            // Close modals on escape
            document.addEventListener('keydown', (e) => {
                if (e.key === 'Escape') {
                    this.closeModal('liveStreamModal');
                    this.closeModal('voiceRecorderModal');
                    this.closeModal('profileEditModal');
                    this.closeModal('postDetailModal');
                    this.closeModal('newChatModal');
                    this.closeModal('analyticsModal');
                }
            });
            
            // Initialize network status
            this.updateNetworkStatus();
        }

        // ==================== PUBLIC API METHODS ====================
        uploadMedia() {
            document.getElementById('uploadZone').classList.remove('d-none');
        }

        recordVoiceNote() {
            this.startVoiceRecording();
        }

        addLocation() {
            this.showToast('Location feature coming soon!', 'info');
        }

        addPoll() {
            document.getElementById('pollEditor').classList.toggle('d-none');
            if (!document.getElementById('pollEditor').classList.contains('d-none')) {
                document.getElementById('pollQuestion').focus();
            }
        }

        schedulePost() {
            this.showToast('Schedule post feature coming soon!', 'info');
        }

        filterPosts(filter) {
            document.querySelectorAll('.filter-chip').forEach(chip => {
                chip.classList.remove('active');
            });
            event.target.classList.add('active');
            this.showToast(`Showing ${filter} posts`, 'info');
        }

        loadMorePosts() {
            this.showToast('Loading more posts...', 'info');
        }

        viewStory(storyId) {
            this.showToast('Viewing story...', 'info');
        }

        closeStory() {
            document.getElementById('storyViewer').classList.add('d-none');
        }

        viewProfile(userId) {
            this.showToast(`Viewing profile ${userId}`, 'info');
        }

        viewMedia(url) {
            window.open(url, '_blank');
        }

        showComments(postId) {
            this.showToast(`Showing comments for post ${postId}`, 'info');
        }

        likePost(postId) {
            this.showToast(`Liked post ${postId}`, 'success');
        }

        sharePost(postId) {
            this.showToast(`Sharing post ${postId}`, 'info');
        }

        showSettings() {
            this.showPage('settingsPage');
        }

        showBookmarks() {
            this.showToast('Bookmarks feature coming soon!', 'info');
        }

        showAnalytics() {
            this.showModal('analyticsModal');
        }

        closeLiveStream() {
            this.closeModal('liveStreamModal');
            if (this.state.stream) {
                this.state.stream.getTracks().forEach(track => track.stop());
                this.state.stream = null;
            }
        }

        closeVoiceRecorder() {
            this.closeModal('voiceRecorderModal');
            if (this.state.mediaRecorder && this.state.isRecording) {
                this.state.mediaRecorder.stop();
                this.state.isRecording = false;
                if (this.state.recordingTimer) {
                    clearInterval(this.state.recordingTimer);
                }
            }
        }

        closeProfileEdit() {
            this.closeModal('profileEditModal');
        }

        closePostDetail() {
            this.closeModal('postDetailModal');
        }

        closeNewChat() {
            this.closeModal('newChatModal');
        }

        closeAnalytics() {
            this.closeModal('analyticsModal');
        }

        editProfile() {
            document.getElementById('editName').value = this.state.userProfile.name;
            document.getElementById('editUsername').value = this.state.userProfile.username;
            document.getElementById('editBio').value = this.state.userProfile.bio;
            this.showModal('profileEditModal');
        }

        saveProfile() {
            const name = document.getElementById('editName').value;
            const username = document.getElementById('editUsername').value;
            const bio = document.getElementById('editBio').value;
            
            this.state.userProfile.name = name;
            this.state.userProfile.username = username;
            this.state.userProfile.bio = bio;
            
            this.updateProfileUI();
            this.closeModal('profileEditModal');
            this.showToast('Profile updated successfully!', 'success');
        }

        editBanner() {
            this.showToast('Edit banner feature coming soon!', 'info');
        }

        editAvatar() {
            this.showToast('Edit avatar feature coming soon!', 'info');
        }

        changeAvatar() {
            this.showToast('Change avatar feature coming soon!', 'info');
        }

        changeBanner() {
            this.showToast('Change banner feature coming soon!', 'info');
        }

        updateAccount() {
            this.showToast('Account updated!', 'success');
        }

        updatePrivacy() {
            this.showToast('Privacy settings updated!', 'success');
        }

        signInWithGoogle() {
            this.showToast('Google sign in coming soon!', 'info');
        }

        signInWithGithub() {
            this.showToast('GitHub sign in coming soon!', 'info');
        }

        clearCache() {
            localStorage.clear();
            sessionStorage.clear();
            window.location.reload();
        }

        // Feature placeholders
        loadTrending() {
            // Load trending data
        }

        loadStories() {
            // Load stories
        }

        loadConversations() {
            // Load conversations
        }

        loadNotifications() {
            // Load notifications
        }

        startNewChat() {
            this.showModal('newChatModal');
        }

        closeChat() {
            document.getElementById('chatView').classList.add('d-none');
            document.querySelector('.messages-list').style.display = 'block';
        }

        sendMessage() {
            const input = document.getElementById('messageInput');
            const message = input.value.trim();
            if (message) {
                this.showToast('Message sent!', 'success');
                input.value = '';
            }
        }

        showChatInfo() {
            this.showToast('Chat info feature coming soon!', 'info');
        }

        videoCall() {
            this.showToast('Video call feature coming soon!', 'info');
        }

        voiceCall() {
            this.showToast('Voice call feature coming soon!', 'info');
        }

        attachFile() {
            this.showToast('File attachment feature coming soon!', 'info');
        }

        markAllAsRead() {
            this.showToast('All notifications marked as read!', 'success');
        }

        showTrending() {
            this.showToast('Trending feature coming soon!', 'info');
        }

        showEvents() {
            this.showToast('Events feature coming soon!', 'info');
        }

        showGroups() {
            this.showToast('Groups feature coming soon!', 'info');
        }

        showPosts() {
            this.showToast('Posts feature coming soon!', 'info');
        }

        showFollowers() {
            this.showToast('Followers feature coming soon!', 'info');
        }

        showFollowing() {
            this.showToast('Following feature coming soon!', 'info');
        }

        showLikes() {
            this.showToast('Likes feature coming soon!', 'info');
        }

        shareProfile() {
            this.showToast('Share profile feature coming soon!', 'info');
        }

        toggleRecording() {
            if (this.state.isRecording) {
                this.state.mediaRecorder.stop();
                this.state.isRecording = false;
                document.getElementById('recordBtn').innerHTML = '<i class="fas fa-microphone"></i>';
                if (this.state.recordingTimer) {
                    clearInterval(this.state.recordingTimer);
                }
            } else {
                this.startVoiceRecording();
            }
        }

        playRecording() {
            this.showToast('Playing recording...', 'info');
        }

        sendRecording() {
            this.showToast('Recording sent!', 'success');
        }

        viewPost(postId) {
            this.showModal('postDetailModal');
            document.getElementById('postDetailContent').innerHTML = `
                <div style="text-align: center; padding: 40px;">
                    <i class="fas fa-newspaper fa-4x" style="color: var(--primary-color); margin-bottom: 20px;"></i>
                    <h3 style="margin-bottom: 15px;">Post Detail View</h3>
                    <p>Detailed view for post ${postId}</p>
                </div>
            `;
        }

        stopVoiceRecording() {
            if (this.state.mediaRecorder && this.state.isRecording) {
                this.state.mediaRecorder.stop();
                this.state.isRecording = false;
                if (this.state.recordingTimer) {
                    clearInterval(this.state.recordingTimer);
                }
            }
        }
    }

    // Initialize the app when DOM is loaded
    document.addEventListener('DOMContentLoaded', () => {
        window.primeMarApp = new PrimeMarPro();
    });
    </script>
</body>
</html>